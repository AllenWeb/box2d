var l=true,p=null,q=false;function r(){return function(){}}function aa(a){return function(){return this[a]}}function ba(a){return function(){return a}}var t,w=this;function ca(){}
function da(a){var c=typeof a;if(c=="object")if(a){if(a instanceof Array||!(a instanceof Object)&&Object.prototype.toString.call(a)=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice"))return"array";if(!(a instanceof Object)&&(Object.prototype.toString.call(a)=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call")))return"function"}else return"null";
else if(c=="function"&&typeof a.call=="undefined")return"object";return c}function ea(a){return a[fa]||(a[fa]=++ga)}var fa="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36),ga=0;function ha(a,c){var b=c||w;if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(b,e)}}else return function(){return a.apply(b,arguments)}}var ia=Date.now||function(){return+new Date};
function B(a,c){function b(){}b.prototype=c.prototype;a.me=c.prototype;a.prototype=new b};function ja(a){this.stack=Error().stack||"";if(a)this.message=String(a)}B(ja,Error);function ma(a){for(var c=1;c<arguments.length;c++){var b=String(arguments[c]).replace(/\$/g,"$$$$");a=a.replace(/\%s/,b)}return a}
function na(a,c){for(var b=0,d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=String(c).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),f=Math.max(d.length,e.length),g=0;b==0&&g<f;g++){var h=d[g]||"",i=e[g]||"",j=RegExp("(\\d*)(\\D*)","g"),k=RegExp("(\\d*)(\\D*)","g");do{var m=j.exec(h)||["","",""],n=k.exec(i)||["","",""];if(m[0].length==0&&n[0].length==0)break;b=qa(m[1].length==0?0:parseInt(m[1],10),n[1].length==0?0:parseInt(n[1],10))||qa(m[2].length==0,n[2].length==0)||qa(m[2],n[2])}while(b==
0)}return b}function qa(a,c){if(a<c)return-1;else if(a>c)return 1;return 0};function ra(a,c){c.unshift(a);ja.call(this,ma.apply(p,c));c.shift();this.Yf=a}B(ra,ja);function sa(a,c){if(!a){var b=Array.prototype.slice.call(arguments,2),d="Assertion failed";if(c){d+=": "+c;var e=b}throw new ra(""+d,e||[]);}return a};var ta=Array.prototype,ua=ta.indexOf?function(a,c,b){sa(a.length!=p);return ta.indexOf.call(a,c,b)}:function(a,c,b){b=b==p?0:b<0?Math.max(0,a.length+b):b;if(typeof a=="string"){if(typeof c!="string"||c.length!=1)return-1;return a.indexOf(c,b)}for(b=b;b<a.length;b++)if(b in a&&a[b]===c)return b;return-1};var va,wa,xa,ya;function za(){return w.navigator?w.navigator.userAgent:p}ya=xa=wa=va=q;var Aa;if(Aa=za()){var Ba=w.navigator;va=Aa.indexOf("Opera")==0;wa=!va&&Aa.indexOf("MSIE")!=-1;xa=!va&&Aa.indexOf("WebKit")!=-1;ya=!va&&!xa&&Ba.product=="Gecko"}var Ca=wa,Da=ya,Ea=xa,Fa=w.navigator,Ga=(Fa&&Fa.platform||"").indexOf("Mac")!=-1,Ha;
a:{var Ia="",Ja;if(va&&w.opera){var Ka=w.opera.version;Ia=typeof Ka=="function"?Ka():Ka}else{if(Da)Ja=/rv\:([^\);]+)(\)|;)/;else if(Ca)Ja=/MSIE\s+([^\);]+)(\)|;)/;else if(Ea)Ja=/WebKit\/(\S+)/;if(Ja){var La=Ja.exec(za());Ia=La?La[1]:""}}if(Ca){var Ma,Na=w.document;Ma=Na?Na.documentMode:undefined;if(Ma>parseFloat(Ia)){Ha=String(Ma);break a}}Ha=Ia}var Oa={};var Pa;!Ca||Oa["9"]||(Oa["9"]=na(Ha,"9")>=0);Ca&&(Oa["8"]||(Oa["8"]=na(Ha,"8")>=0));function Qa(){}Qa.prototype.Ae=q;Qa.prototype.bd=function(){if(!this.Ae){this.Ae=l;this.zb()}};Qa.prototype.zb=r();function D(a,c){this.type=a;this.currentTarget=this.target=c}B(D,Qa);D.prototype.zb=function(){delete this.type;delete this.target;delete this.currentTarget};D.prototype.Ac=q;D.prototype.xd=l;function Ra(a,c){a&&this.cd(a,c)}B(Ra,D);t=Ra.prototype;t.target=p;t.relatedTarget=p;t.offsetX=0;t.offsetY=0;t.clientX=0;t.clientY=0;t.screenX=0;t.screenY=0;t.button=0;t.keyCode=0;t.charCode=0;t.ctrlKey=q;t.altKey=q;t.shiftKey=q;t.metaKey=q;t.Hf=q;t.Be=p;
t.cd=function(a,c){var b=this.type=a.type;this.target=a.target||a.srcElement;this.currentTarget=c;var d=a.relatedTarget;if(d){if(Da)try{d=d.nodeName&&d}catch(e){d=p}}else if(b=="mouseover")d=a.fromElement;else if(b=="mouseout")d=a.toElement;this.relatedTarget=d;this.offsetX=a.offsetX!==undefined?a.offsetX:a.layerX;this.offsetY=a.offsetY!==undefined?a.offsetY:a.layerY;this.clientX=a.clientX!==undefined?a.clientX:a.pageX;this.clientY=a.clientY!==undefined?a.clientY:a.pageY;this.screenX=a.screenX||0;
this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||(b=="keypress"?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Hf=Ga?a.metaKey:a.ctrlKey;this.Be=a;delete this.xd;delete this.Ac};t.zb=function(){Ra.me.zb.call(this);this.relatedTarget=this.currentTarget=this.target=this.Be=p};function Ta(){}var Ua=0;t=Ta.prototype;t.key=0;t.Bc=q;t.we=q;t.cd=function(a,c,b,d,e,f){if(da(a)=="function")this.Ce=l;else if(a&&a.handleEvent&&da(a.handleEvent)=="function")this.Ce=q;else throw Error("Invalid listener argument");this.Lc=a;this.Ve=c;this.src=b;this.type=d;this.capture=!!e;this.Od=f;this.we=q;this.key=++Ua;this.Bc=q};t.handleEvent=function(a){if(this.Ce)return this.Lc.call(this.Od||this.src,a);return this.Lc.handleEvent.call(this.Lc,a)};function F(a,c){this.Te=c;this.Pb=[];if(a>this.Te)throw Error("[goog.structs.SimplePool] Initial cannot be greater than max");for(var b=0;b<a;b++)this.Pb.push(this.pb?this.pb():{})}B(F,Qa);F.prototype.pb=p;F.prototype.ze=p;function Va(a){if(a.Pb.length)return a.Pb.pop();return a.pb?a.pb():{}}function Wa(a,c){a.Pb.length<a.Te?a.Pb.push(c):Xa(a,c)}
function Xa(a,c){if(a.ze)a.ze(c);else{var b=da(c);if(b=="object"||b=="array"||b=="function")if(da(c.bd)=="function")c.bd();else for(var d in c)delete c[d]}}F.prototype.zb=function(){F.me.zb.call(this);for(var a=this.Pb;a.length;)Xa(this,a.pop());delete this.Pb};var Ya;var Za=(Ya="ScriptEngine"in w&&w.ScriptEngine()=="JScript")?w.ScriptEngineMajorVersion()+"."+w.ScriptEngineMinorVersion()+"."+w.ScriptEngineBuildVersion():"0";var $a,ab,bb,cb,db,eb,fb,gb,hb,ib,jb;
(function(){function a(){return{ib:0,gb:0}}function c(){return[]}function b(){function n(o){return g.call(n.src,n.key,o)}return n}function d(){return new Ta}function e(){return new Ra}var f=Ya&&!(na(Za,"5.7")>=0),g;eb=function(n){g=n};if(f){$a=function(){return Va(h)};ab=function(n){Wa(h,n)};bb=function(){return Va(i)};cb=function(n){Wa(i,n)};db=function(){return Va(j)};fb=function(){Wa(j,b())};gb=function(){return Va(k)};hb=function(n){Wa(k,n)};ib=function(){return Va(m)};jb=function(n){Wa(m,n)};
var h=new F(0,600);h.pb=a;var i=new F(0,600);i.pb=c;var j=new F(0,600);j.pb=b;var k=new F(0,600);k.pb=d;var m=new F(0,600);m.pb=e}else{$a=a;ab=ca;bb=c;cb=ca;db=b;fb=ca;gb=d;hb=ca;ib=e;jb=ca}})();function kb(a,c,b){for(var d in a)c.call(b,a[d],d,a)}var lb=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];function G(a){for(var c,b,d=1;d<arguments.length;d++){b=arguments[d];for(c in b)a[c]=b[c];for(var e=0;e<lb.length;e++){c=lb[e];if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]}}};var mb={},H={},I={},nb={};
function ob(a,c,b,d,e){if(c)if(da(c)=="array"){for(var f=0;f<c.length;f++)ob(a,c[f],b,d,e);return p}else{d=!!d;var g=H;c in g||(g[c]=$a());g=g[c];if(!(d in g)){g[d]=$a();g.ib++}g=g[d];var h=ea(a),i;g.gb++;if(g[h]){i=g[h];for(f=0;f<i.length;f++){g=i[f];if(g.Lc==b&&g.Od==e){if(g.Bc)break;return i[f].key}}}else{i=g[h]=bb();g.ib++}f=db();f.src=a;g=gb();g.cd(b,f,a,c,d,e);b=g.key;f.key=b;i.push(g);mb[b]=g;I[h]||(I[h]=bb());I[h].push(g);if(a.addEventListener){if(a==w||!a.ye)a.addEventListener(c,f,d)}else a.attachEvent(pb(c),
f);return b}else throw Error("Invalid event type");}function qb(a,c,b,d,e){if(da(c)=="array"){for(var f=0;f<c.length;f++)qb(a,c[f],b,d,e);return p}d=!!d;a:{f=H;if(c in f){f=f[c];if(d in f){f=f[d];a=ea(a);if(f[a]){a=f[a];break a}}}a=p}if(!a)return q;for(f=0;f<a.length;f++)if(a[f].Lc==b&&a[f].capture==d&&a[f].Od==e)return rb(a[f].key);return q}
function rb(a){if(!mb[a])return q;var c=mb[a];if(c.Bc)return q;var b=c.src,d=c.type,e=c.Ve,f=c.capture;if(b.removeEventListener){if(b==w||!b.ye)b.removeEventListener(d,e,f)}else b.detachEvent&&b.detachEvent(pb(d),e);b=ea(b);e=H[d][f][b];if(I[b]){var g=I[b],h=ua(g,c);if(h>=0){sa(g.length!=p);ta.splice.call(g,h,1)}g.length==0&&delete I[b]}c.Bc=l;e.Ue=l;sb(d,f,b,e);delete mb[a];return l}
function sb(a,c,b,d){if(!d.hd)if(d.Ue){for(var e=0,f=0;e<d.length;e++)if(d[e].Bc){var g=d[e].Ve;g.src=p;fb(g);hb(d[e])}else{if(e!=f)d[f]=d[e];f++}d.length=f;d.Ue=q;if(f==0){cb(d);delete H[a][c][b];H[a][c].ib--;if(H[a][c].ib==0){ab(H[a][c]);delete H[a][c];H[a].ib--}if(H[a].ib==0){ab(H[a]);delete H[a]}}}}
function tb(a,c,b){var d=0,e=a==p,f=c==p,g=b==p;b=!!b;if(e)kb(I,function(i){for(var j=i.length-1;j>=0;j--){var k=i[j];if((f||c==k.type)&&(g||b==k.capture)){rb(k.key);d++}}});else{a=ea(a);if(I[a]){a=I[a];for(e=a.length-1;e>=0;e--){var h=a[e];if((f||c==h.type)&&(g||b==h.capture)){rb(h.key);d++}}}}return d}function pb(a){if(a in nb)return nb[a];return nb[a]="on"+a}
function ub(a,c,b,d,e){var f=1;c=ea(c);if(a[c]){a.gb--;a=a[c];if(a.hd)a.hd++;else a.hd=1;try{for(var g=a.length,h=0;h<g;h++){var i=a[h];if(i&&!i.Bc)f&=vb(i,e)!==q}}finally{a.hd--;sb(b,d,c,a)}}return Boolean(f)}function vb(a,c){var b=a.handleEvent(c);a.we&&rb(a.key);return b}
eb(function(a,c){if(!mb[a])return l;var b=mb[a],d=b.type,e=H;if(!(d in e))return l;e=e[d];var f,g;if(Pa===undefined)Pa=Ca&&!w.addEventListener;if(Pa){var h;if(!(h=c))a:{h="window.event".split(".");for(var i=w;f=h.shift();)if(i[f])i=i[f];else{h=p;break a}h=i}f=h;h=l in e;i=q in e;if(h){if(f.keyCode<0||f.returnValue!=undefined)return l;a:{var j=q;if(f.keyCode==0)try{f.keyCode=-1;break a}catch(k){j=l}if(j||f.returnValue==undefined)f.returnValue=l}}j=ib();j.cd(f,this);f=l;try{if(h){for(var m=bb(),n=j.currentTarget;n;n=
n.parentNode)m.push(n);g=e[l];g.gb=g.ib;for(var o=m.length-1;!j.Ac&&o>=0&&g.gb;o--){j.currentTarget=m[o];f&=ub(g,m[o],d,l,j)}if(i){g=e[q];g.gb=g.ib;for(o=0;!j.Ac&&o<m.length&&g.gb;o++){j.currentTarget=m[o];f&=ub(g,m[o],d,q,j)}}}else f=vb(b,j)}finally{if(m){m.length=0;cb(m)}j.bd();jb(j)}return f}d=new Ra(c,this);try{f=vb(b,d)}finally{d.bd()}return f});function wb(a,c){this.x=a!==undefined?a:0;this.y=c!==undefined?c:0}wb.prototype.toString=function(){return"("+this.x+", "+this.y+")"};function xb(a,c){this.x=Number(a)||0;this.y=Number(c)||0}B(xb,wb);function yb(a){return Math.sqrt(a.x*a.x+a.y*a.y)}xb.prototype.scale=function(a){this.x*=a;this.y*=a;return this};xb.prototype.add=function(a){this.x+=a.x;this.y+=a.y;return this};function zb(a,c){a.x-=c.x;a.y-=c.y;return a};function Ab(){}B(Ab,Qa);t=Ab.prototype;t.ye=l;t.je=p;t.addEventListener=function(a,c,b,d){ob(this,a,c,b,d)};t.removeEventListener=function(a,c,b,d){qb(this,a,c,b,d)};
t.dispatchEvent=function(a){a=a;if(typeof a=="string")a=new D(a,this);else if(a instanceof D)a.target=a.target||this;else{var c=a;a=new D(a.type,this);G(a,c)}c=1;var b,d=a.type,e=H;if(d in e){e=e[d];d=l in e;var f;if(d){b=[];for(f=this;f;f=f.je)b.push(f);f=e[l];f.gb=f.ib;for(var g=b.length-1;!a.Ac&&g>=0&&f.gb;g--){a.currentTarget=b[g];c&=ub(f,b[g],a.type,l,a)&&a.xd!=q}}if(q in e){f=e[q];f.gb=f.ib;if(d)for(g=0;!a.Ac&&g<b.length&&f.gb;g++){a.currentTarget=b[g];c&=ub(f,b[g],a.type,q,a)&&a.xd!=q}else for(b=
this;!a.Ac&&b&&f.gb;b=b.je){a.currentTarget=b;c&=ub(f,b,a.type,q,a)&&a.xd!=q}}a=Boolean(c)}else a=l;return a};t.zb=function(){Ab.me.zb.call(this);tb(this);this.je=p};function Bb(a,c){return a.x*c.x+a.y*c.y}function L(a,c){return new N(a.a.x*c.x+a.b.x*c.y,a.a.y*c.x+a.b.y*c.y)}function Cb(a,c){return new N(a.x+c.x,a.y+c.y)}function Db(a,c){return new N(a.x-c.x,a.y-c.y)}function O(a){return a>0?a:-a}function P(a,c){return a>c?a:c}function Q(a,c,b){return P(c,a<b?a:b)};function N(a,c){if(a===undefined)a=0;this.x=a;if(c===undefined)c=0;this.y=c}B(N,xb);t=N.prototype;t.qa=function(){this.y=this.x=0};t.g=function(a,c){this.x=a;this.y=c};function R(a,c){a.x=c.x;a.y=c.y}t.Cd=function(){return new N(this.x,this.y)};function Eb(a,c){var b=a.x;a.x=c.a.x*b+c.b.x*a.y;a.y=c.a.y*b+c.b.y*a.y}t.fc=function(){this.x=Math.abs(this.x);this.y=Math.abs(this.y)};t.Gc=function(){return isFinite(this.x)&&isFinite(this.y)};function Fb(){this.G=new N;this.B=new N}Fb.prototype.Gc=function(){var a=this.B.x,c=this.B.y;a=this.B.x;c=this.B.y;a-=this.G.x;c-=this.G.y;return a=(a=a>=0&&c>=0)&&this.G.Gc()&&this.B.Gc()};function Gb(){}Gb.prototype={Pa:p,Pd:p,Qd:0};function S(){}S.prototype={sa:p,Ga:p,r:p,next:p};function Hb(){}Hb.prototype={Jd:p,Kd:p,ke:p};function Ib(a,c){this.o=new S;this.q=new S;this.z=0;if(!a||!c)this.J=this.I=p;else{this.I=a;this.J=c;this.Da=0;this.la=Math.sqrt(this.I.la*this.J.la);this.ma=P(this.I.ma,this.J.ma);this.p=this.F=p;this.o.Ga=p;this.o.r=p;this.o.next=p;this.o.sa=p;this.q.Ga=p;this.q.r=p;this.q.next=p;this.q.sa=p}}Ib.prototype={hc:ba(p),ic:aa("p"),Fc:r(),z:0,F:p,p:p,o:new S,q:new S,I:p,J:p,Da:0,la:p,ma:p};function Jb(){}Jb.prototype.se=ba(p);Jb.prototype.te=r();function Kb(a,c){this.o=new S;this.q=new S;this.z=0;if(!a||!c)this.J=this.I=p;else{this.I=a;this.J=c;this.Da=0;this.la=Math.sqrt(this.I.la*this.J.la);this.ma=P(this.I.ma,this.J.ma);this.p=this.F=p;this.o.Ga=p;this.o.r=p;this.o.next=p;this.o.sa=p;this.q.Ga=p;this.q.r=p;this.q.next=p;this.q.sa=p}}B(Kb,Ib);Kb.prototype.Fc=r();Kb.prototype.hc=ba(p);var Lb=Math.PI,Mb=2/180*Lb,Nb=8/180*Lb,Ob=2/180/1;function Pb(){}Pb.prototype={qf:0,nf:0,of:0,mf:0,pf:p};function Qb(){this.R=new Pb;this.R.pf=this}Qb.prototype={g:function(a){this.le(a.Mb)},Cd:function(){var a=new Qb;a.le(this.Mb);return a},le:function(a){this.Mb=a;this.R.qf=this.Mb&255;this.R.nf=(this.Mb&65280)>>8&255;this.R.of=(this.Mb&16711680)>>16&255;this.R.mf=(this.Mb&4278190080)>>24&255},R:new Pb,Mb:0};function Rb(){this.position=new N;this.id=new Qb}Rb.prototype={hb:p,oa:p,ta:p};function Sb(){this.X=Array(2);for(var a=0;a<2;a++)this.X[a]=new Rb;this.D=new N}Sb.prototype={X:p,D:p,S:0};function Tb(){this.yb=new N;this.id=new Qb};function Ub(a,c,b,d){var e=0,f=c[0].yb,g=c[1].yb,h=Bb(b,c[0].yb)-d;b=Bb(b,c[1].yb)-d;if(h<=0)a[e++]=c[0];if(b<=0)a[e++]=c[1];if(h*b<0){b=h/(h-b);d=a[e].yb;d.x=f.x+b*(g.x-f.x);d.y=f.y+b*(g.y-f.y);a[e].id=h>0?c[0].id:c[1].id;++e}return e}
function Vb(a,c,b){var d=a.u,e=b.Oa,f=b.u,g=a.db[c].x,h=a.db[c].y,i=g,j=a.d;g=j.a.x*i+j.b.x*h;h=j.a.y*i+j.b.y*h;var k=g,m=h;j=b.d;i=k*j.a.x+m*j.a.y;m=k*j.b.x+m*j.b.y;k=i;i=0;j=Number.MAX_VALUE;for(var n=0;n<e;++n){var o=f[n];o=o.x*k+o.y*m;if(o<j){j=o;i=n}}j=a.d;e=a.c.x+(j.a.x*d[c].x+j.b.x*d[c].y);a=a.c.y+(j.a.y*d[c].x+j.b.y*d[c].y);j=b.d;c=b.c.x+(j.a.x*f[i].x+j.b.x*f[i].y);b=b.c.y+(j.a.y*f[i].x+j.b.y*f[i].y);c-=e;b-=a;return c*g+b*h}
function Wb(a,c,b,d){var e=c.Oa,f=b.c.x-c.c.x,g=b.c.y-c.c.y,h=f*c.d.a.x+g*c.d.a.y;g=f*c.d.b.x+g*c.d.b.y;f=0;for(var i=-Number.MAX_VALUE,j=0;j<e;++j){var k=c.db[j].x*h+c.db[j].y*g;if(k>i){i=k;f=j}}h=Vb(c,f,b);if(h>0&&d==q)return h;j=f-1>=0?f-1:e-1;k=Vb(c,j,b);if(k>0&&d==q)return k;var m=f+1<e?f+1:0,n=Vb(c,m,b);if(n>0&&d==q)return n;i=g=0;if(k>h&&k>n){i=-1;g=j;j=k}else if(n>h){i=1;g=m;j=n}else{a[0]=f;return h}for(;;){f=i==-1?g-1>=0?g-1:e-1:g+1<e?g+1:0;h=Vb(c,f,b);if(h>0&&d==q)return h;if(h>j){g=f;j=
h}else break}a[0]=g;return j}var Xb=new N;function Yb(a,c){this.o=new S;this.q=new S;this.z=0;if(!a||!c)this.J=this.I=p;else{this.I=a;this.J=c;this.Da=0;this.la=Math.sqrt(this.I.la*this.J.la);this.ma=P(this.I.ma,this.J.ma);this.p=this.F=p;this.o.Ga=p;this.o.r=p;this.o.next=p;this.o.sa=p;this.q.Ga=p;this.q.r=p;this.q.next=p;this.q.sa=p;this.ya=[new Sb];this.ya[0].S=0;this.ya[0].X[0].oa=0;this.ya[0].X[0].ta=0}}G(Yb.prototype,Ib.prototype);
Yb.prototype.Fc=function(){var a=this.ya[0],c=this.I,b=this.J;a.S=0;var d=b.c.x-c.c.x,e=b.c.y-c.c.y,f=d*d+e*e;c=c.ja+b.ja;if(!(f>c*c&&1)){if(f<Number.MIN_VALUE){f=-c;a.D.g(0,1)}else{var g=Math.sqrt(f);f=g-c;c=1/g;a.D.x=c*d;a.D.y=c*e}a.S=1;d=a.X[0];d.id.le(0);d.hb=f;d.position.x=b.c.x-b.ja*a.D.x;d.position.y=b.c.y-b.ja*a.D.y}this.Da=this.ya[0].S>0?1:0};Yb.prototype.hc=aa("ya");function Zb(a,c){return new Yb(a,c)}function $b(){};function ac(a,c){this.o=new S;this.q=new S;this.z=0;if(!a||!c)this.J=this.I=p;else{this.I=a;this.J=c;this.Da=0;this.la=Math.sqrt(this.I.la*this.J.la);this.ma=P(this.I.ma,this.J.ma);this.p=this.F=p;this.o.Ga=p;this.o.r=p;this.o.next=p;this.o.sa=p;this.q.Ga=p;this.q.r=p;this.q.next=p;this.q.sa=p;this.ya=[new Sb];if(this.I.na!=bc)throw"Assert Failed!";if(this.J.na!=cc)throw"Assert Failed!";this.ya[0].S=0;this.ya[0].X[0].oa=0;this.ya[0].X[0].ta=0}}G(ac.prototype,Ib.prototype);
ac.prototype.Fc=function(){a:{var a=this.ya[0],c=this.I,b=this.J;a.S=0;var d,e,f;e=b.c.x-c.c.x;f=b.c.y-c.c.y;var g=c.d,h=e*g.a.x+f*g.a.y;f=e*g.b.x+f*g.b.y;e=h;var i=0,j=-Number.MAX_VALUE;h=b.ja;for(d=0;d<c.Oa;++d){var k=c.db[d].x*(e-c.u[d].x)+c.db[d].y*(f-c.u[d].y);if(k>h)break a;if(k>j){j=k;i=d}}if(j<Number.MIN_VALUE){a.S=1;f=c.db[i];a.D.x=g.a.x*f.x+g.b.x*f.y;a.D.y=g.a.y*f.x+g.b.y*f.y;d=a.X[0];d.id.R.Kc=i;d.id.R.mc=255;d.id.R.wd=255;d.id.R.Ld=0;d.position.x=b.c.x-h*a.D.x;d.position.y=b.c.y-h*a.D.y;
d.hb=j-h}else{i=i;j=i+1<c.Oa?i+1:0;var m=c.u[j].x-c.u[i].x;k=c.u[j].y-c.u[i].y;var n=Math.sqrt(m*m+k*k);m/=n;k/=n;if(n<Number.MIN_VALUE){e=e-c.u[i].x;f=f-c.u[i].y;c=Math.sqrt(e*e+f*f);e/=c;f/=c;if(!(c>h)){a.S=1;a.D.g(g.a.x*e+g.b.x*f,g.a.y*e+g.b.y*f);d=a.X[0];d.id.R.Kc=255;d.id.R.mc=i;d.id.R.wd=255;d.id.R.Ld=0;d.position.x=b.c.x-h*a.D.x;d.position.y=b.c.y-h*a.D.y;d.hb=c-h}}else{var o=(e-c.u[i].x)*m+(f-c.u[i].y)*k;d=a.X[0];d.id.R.Kc=255;d.id.R.mc=255;d.id.R.wd=255;d.id.R.Ld=0;if(o<=0){m=c.u[i].x;c=
c.u[i].y;d.id.R.mc=i}else if(o>=n){m=c.u[j].x;c=c.u[j].y;d.id.R.mc=j}else{m=m*o+c.u[i].x;c=k*o+c.u[i].y;d.id.R.Kc=i}e=e-m;f=f-c;c=Math.sqrt(e*e+f*f);e/=c;f/=c;if(!(c>h)){a.S=1;a.D.g(g.a.x*e+g.b.x*f,g.a.y*e+g.b.y*f);d.position.x=b.c.x-h*a.D.x;d.position.y=b.c.y-h*a.D.y;d.hb=c-h}}}}this.Da=this.ya[0].S>0?1:0};ac.prototype.hc=aa("ya");function dc(a,c){return new ac(a,c)}function ec(){};function fc(a,c){this.o=new S;this.q=new S;this.z=0;if(!a||!c)this.J=this.I=p;else{this.I=a;this.J=c;this.Da=0;this.la=Math.sqrt(this.I.la*this.J.la);this.ma=P(this.I.ma,this.J.ma);this.p=this.F=p;this.o.Ga=p;this.o.r=p;this.o.next=p;this.o.sa=p;this.q.Ga=p;this.q.r=p;this.q.next=p;this.q.sa=p;this.kd=new Sb;this.ya=[new Sb];this.ya[0].S=0}}B(fc,Ib);
fc.prototype.Fc=function(){for(var a=this.ya[0],c=this.kd.X,b=0;b<a.S;b++){var d=c[b],e=a.X[b];d.oa=e.oa;d.ta=e.ta;d.id=e.id.Cd()}this.kd.S=a.S;b=this.I;var f=this.J;var g=a.S=0;c=[g];d=Wb(c,b,f,q);g=c[0];if(!(d>0&&1)){var h=0;c=[h];var i=Wb(c,f,b,q);h=c[0];if(!(i>0&&1)){c=e=0;if(i>0.98*d+0.0010){d=f;i=b;e=h;c=1}else{d=b;i=f;e=g;c=0}b=[new Tb,new Tb];f=e;g=i;var j=d.u;i=g.Oa;h=g.u;var k=j[f+1==d.Oa?0:f+1],m=k.x,n=k.y;k=j[f];m-=k.x;n-=k.y;k=m;m=n;n=-k;k=1/Math.sqrt(m*m+n*n);m*=k;n*=k;m=m;var o=n;k=
m;j=d.d;m=j.a.x*k+j.b.x*o;o=j.a.y*k+j.b.y*o;n=m;m=o;j=g.d;k=n*j.a.x+m*j.a.y;m=n*j.b.x+m*j.b.y;n=k;o=j=0;for(var s=Number.MAX_VALUE,v=0;v<i;++v){var u=v,A=v+1<i?v+1:0;k=h[A];var y=k.x,x=k.y;k=h[u];y-=k.x;x-=k.y;k=y;y=x;x=-k;k=1/Math.sqrt(y*y+x*x);y*=k;x*=k;k=y*n+x*m;if(k<s){s=k;j=u;o=A}}i=b[0];k=i.yb;R(k,h[j]);Eb(k,g.d);k.add(g.c);i.id.R.wd=f;i.id.R.Kc=j;i.id.R.mc=j;i=b[1];k=i.yb;R(k,h[o]);Eb(k,g.d);k.add(g.c);i.id.R.wd=f;i.id.R.Kc=j;i.id.R.mc=o;f=d.u;k=f[e];n=e+1<d.Oa?f[e+1]:f[0];g=n.x-k.x;h=n.y-
k.y;m=g;j=d.d;g=j.a.x*m+j.b.x*h;h=j.a.y*m+j.b.y*h;e=1/Math.sqrt(g*g+h*h);g*=e;h*=e;e=g;f=h;m=e;e=f;f=-m;i=k.x;o=k.y;m=i;j=d.d;i=j.a.x*m+j.b.x*o;o=j.a.y*m+j.b.y*o;i+=d.c.x;o+=d.c.y;k=n.x;n=n.y;m=k;j=d.d;k=j.a.x*m+j.b.x*n;n=j.a.y*m+j.b.y*n;k+=d.c.x;n+=d.c.y;d=e*i+f*o;m=-(g*i+h*o);k=g*k+h*n;n=[new Tb,new Tb];i=[new Tb,new Tb];j=0;Xb.g(-g,-h);j=Ub(n,b,Xb,m);if(!(j<2)){Xb.g(g,h);j=Ub(i,n,Xb,k);if(!(j<2)){c?a.D.g(-e,-f):a.D.g(e,f);for(g=b=0;g<2;++g){h=i[g].yb;h=e*h.x+f*h.y-d;if(h<=0){k=a.X[b];k.hb=h;R(k.position,
i[g].yb);k.id.g(i[g].id);k.id.R.Ld=c;++b}}a.S=b}}}}if(a.S>0){c=[q,q];for(b=0;b<a.S;++b){d=a.X[b];d.oa=0;d.ta=0;e=d.id.key;for(f=0;f<this.kd.S;++f)if(c[f]!=l){g=this.kd.X[f];if(g.id.key==e){c[f]=l;d.oa=g.oa;d.ta=g.ta;break}}}this.Da=1}else this.Da=0};fc.prototype.hc=aa("ya");function gc(a,c){return new fc(a,c)}function hc(){};function ic(a,c,b,d){T[b][d].Jd=a;T[b][d].Kd=c;T[b][d].ke=l;if(b!=d){T[d][b].Jd=a;T[d][b].Kd=c;T[d][b].ke=q}}var T=p,jc=q;function kc(a){this.tc=new Kb;this.Q=a;this.Wd=q}B(kc,Jb);
kc.prototype.se=function(a,c){var b=a,d=c,e=b.w,f=d.w;if((e.z&lc)==lc&&(f.z&lc)==lc)return this.tc;if(b.w==d.w)return this.tc;a:{for(var g=f.Z;g!=p;g=g.next)if(g.sa==e){e=g.Rb.sb==q;break a}e=q}if(e)return this.tc;e=b.qc==d.qc&&b.qc!=0?b.qc>0:(b.Za&d.Ta)!=0&&(b.Ta&d.Za)!=0;if(e==q)return this.tc;if(f.i==0){f=b;b=d;d=f}b=b;d=d;f=this.Q.zf;if(jc==q){T=Array(mc);for(e=0;e<mc;e++){T[e]=Array(mc);for(g=0;g<mc;g++)T[e][g]=new Hb}ic(Zb,$b,cc,cc);ic(dc,ec,bc,cc);ic(gc,hc,bc,bc);jc=l}e=b.na;g=d.na;var h=T[e][g].Jd;
if(h)if(T[e][g].ke)d=h(b,d,f);else{d=h(d,b,f);for(b=0;b<d.Da;++b){f=d.hc()[b];f.D=new N(-f.D.x,-f.D.y)}d=d}else d=p;if(d==p)return this.tc;else{d.F=p;d.p=this.Q.aa;if(this.Q.aa!=p)this.Q.aa.F=d;this.Q.aa=d;this.Q.Ub++}return d};kc.prototype.te=function(a,c,b){if(b!=p)if(b!=this.tc)if(this.Wd==l)nc(this,b);else b.z|=2};
function nc(a,c){if(c.F)c.F.p=c.p;if(c.p)c.p.F=c.F;if(c==a.Q.aa)a.Q.aa=c.p;if(c.Da>0){var b=c.I.w,d=c.J.w,e=c.o,f=c.q;oc(b);oc(d);if(e.r)e.r.next=e.next;if(e.next)e.next.r=e.r;if(e==b.aa)b.aa=e.next;e.r=p;e.next=p;if(f.r)f.r.next=f.next;if(f.next)f.next.r=f.r;if(f==d.aa)d.aa=f.next;f.r=p;f.next=p}b=a.Q.zf;if(c.Da>0){oc(c.I.w);oc(c.J.w)}d=T[c.I.na][c.J.na].Kd;d(c,b);--a.Q.Ub};var pc=new (r());function qc(){}qc.prototype={ue:function(){this.status|=rc},bf:function(){this.status&=~rc},oe:function(){return(this.status&rc)==rc},lf:function(){this.status|=sc},cf:function(){this.status&=~sc},ef:function(){return(this.status&sc)==sc},kf:function(){this.status|=tc},pe:function(){return(this.status&tc)==tc},Ha:0,Ia:0,next:0,status:0};qc.prototype.xe=p;var rc=1,sc=2,tc=4;function uc(){}uc.prototype={Ha:0,Ia:0};function vc(){var a=0;this.Wb=Array(8192);for(a=0;a<8192;++a)this.Wb[a]=65535;this.ra=Array(8192);for(a=0;a<8192;++a)this.ra[a]=new qc;this.Wa=Array(8192);for(a=0;a<8192;++a)this.Wa[a]=new uc;for(a=0;a<8192;++a){this.ra[a].Ha=65535;this.ra[a].Ia=65535;this.ra[a].C=p;this.ra[a].status=0;this.ra[a].next=a+1}this.ra[8191].next=65535;this.ce=0}
vc.prototype={df:function(a,c){this.Qa=a;this.Td=c},Ad:function(a,c){var b=this.af(a,c);if(b.oe()==q){b.ue();this.Wa[this.Eb].Ha=b.Ha;this.Wa[this.Eb].Ia=b.Ia;++this.Eb}b.cf()},Ed:function(a,c){var b=wc(this,a,c);if(b!=p){if(b.oe()==q){b.ue();this.Wa[this.Eb].Ha=b.Ha;this.Wa[this.Eb].Ia=b.Ia;++this.Eb}b.lf()}},af:function(a,c){if(a>c){var b=a;a=c;c=b}b=xc(a,c)&8191;var d=yc(this,a,c,b);if(d!=p)return d;var e=this.pd;d=this.ra[e];this.pd=d.next;d.Ha=a;d.Ia=c;d.status=0;d.C=p;d.next=this.Wb[b];this.Wb[b]=
e;++this.ce;return d},jf:function(a,c){if(a>c){var b=a;a=c;c=b}for(var d=xc(a,c)&8191,e=this.Wb[d],f=p;e!=65535;)if(this.ra[e].Ha==a&&this.ra[e].Ia==c){b=e;if(f)f.next=this.ra[e].next;else this.Wb[d]=this.ra[e].next;d=this.ra[b];e=d.C;d.next=this.pd;d.Ha=65535;d.Ia=65535;d.C=p;d.status=0;this.pd=b;--this.ce;return e}else{f=this.ra[e];e=f.next}return p},Qa:p,Td:p,pd:0,ce:0,Wa:p,Eb:0,Wb:p};function wc(a,c,b){if(c>b){var d=c;c=b;b=d}return yc(a,c,b,xc(c,b)&8191)}
function yc(a,c,b,d){for(d=a.Wb[d];d!=65535&&(a.ra[d].Ha==c&&a.ra[d].Ia==b)==q;)d=a.ra[d].next;if(d==65535)return p;return a.ra[d]}
vc.prototype.Ec=function(){var a=0,c=0,b=this.Qa.za,d=[];for(a=0;a<this.Eb;++a){var e=wc(this,this.Wa[a].Ha,this.Wa[a].Ia);e.bf();var f=b[e.Ha],g=b[e.Ia];if(e.ef()){e.pe()==l&&this.Td.te(f.C,g.C,e.C);this.Wa[c].Ha=e.Ha;this.Wa[c].Ia=e.Ia;++c}else if(e.pe()==q){e.xe=this.Td.se(f.C,g.C);d.push(e.xe);e.kf()}}for(a=0;a<c;++a)this.jf(this.Wa[a].Ha,this.Wa[a].Ia);this.Eb=0;return d};
function xc(a,c){var b=c<<16&4294901760|a;b=~b+(b<<15&4294934528);b^=b>>12&1048575;b+=b<<2&4294967292;b^=b>>4&268435455;b*=2057;b^=b>>16&65535;return b};function zc(){}zc.prototype={lc:function(){return(this.value&1)==0},qe:function(){return(this.value&1)==1},$c:function(a){var c=this.value,b=this.H,d=this.v;this.value=a.value;this.H=a.H;this.v=a.v;a.value=c;a.H=b;a.v=d},value:0,H:0,v:0};function Ac(){this.wa=[0,0];this.Ea=[0,0]}Ac.prototype={ic:function(){return this.wa[0]},Fd:function(a){this.wa[0]=a},Gc:function(){return this.ec!=65535},wa:[0,0],Ea:[0,0],ec:0,timeStamp:0,C:p};function Bc(){this.jd=[0,0];this.yd=[0,0]};function Cc(a,c){this.eb=new vc;this.za=Array(8192);this.Ua=Array(2048);this.wc=Array(1024);this.Zb=new N;var b=0;this.eb.df(this,c);this.ia=a;for(b=this.Fb=0;b<1024;b++)this.wc[b]=0;this.Ua=Array(2);for(b=0;b<2;b++){this.Ua[b]=Array(2048);for(var d=0;d<2048;d++)this.Ua[b][d]=new zc}b=a.B.x;d=a.B.y;b-=a.G.x;d-=a.G.y;this.Zb.x=65535/b;this.Zb.y=65535/d;for(b=0;b<1023;++b){d=new Ac;this.za[b]=d;d.Fd(b+1);d.timeStamp=0;d.ec=65535;d.C=p}d=new Ac;this.za[1023]=d;d.Fd(65535);d.timeStamp=0;d.ec=65535;d.C=
p;this.qd=0;this.zc=1;this.wb=0}
Cc.prototype={kc:function(a){var c,b,d,e;c=a.G.x;b=a.G.y;c-=this.ia.B.x;b-=this.ia.B.y;d=this.ia.G.x;e=this.ia.G.y;d-=a.B.x;e-=a.B.y;c=P(c,d);b=P(b,e);return P(c,b)<0},gc:function(a){for(var c=this.za[a],b=2*this.Fb,d=0;d<2;++d){var e=this.Ua[d],f=c.wa[d],g=c.Ea[d],h=e[f].value,i=e[g].value,j=[],k=0,m=g-f-1,n,o;for(k=0;k<m;k++){j[k]=new zc;n=j[k];o=e[f+1+k];n.value=o.value;n.H=o.H;n.v=o.v}m=j.length;var s=f;for(k=0;k<m;k++){o=j[k];n=e[s+k];n.value=o.value;n.H=o.H;n.v=o.v}j=[];m=b-g-1;for(k=0;k<m;k++){j[k]=
new zc;n=j[k];o=e[g+1+k];n.value=o.value;n.H=o.H;n.v=o.v}m=j.length;s=g-1;for(k=0;k<m;k++){o=j[k];n=e[s+k];n.value=o.value;n.H=o.H;n.v=o.v}m=b-2;for(j=f;j<m;++j){k=this.za[e[j].H];if(e[j].lc())k.wa[d]=j;else k.Ea[d]=j}m=g-1;for(f=f;f<m;++f)e[f].v--;this.Hc([0],[0],h,i,e,b-2,d)}for(b=0;b<this.wb;++b)this.eb.Ed(a,this.wc[b]);this.eb.Ec();this.wb=0;this.Dd();c.C=p;c.ec=65535;c.wa[0]=65535;c.wa[1]=65535;c.Ea[0]=65535;c.Ea[1]=65535;c.Fd(this.qd);this.qd=a;--this.Fb},re:function(a,c){var b=0,d=0,e,f,g=
0,h;if(!(a==65535||1024<=a))if(c.Gc()!=q){var i=2*this.Fb,j=this.za[a],k=new Bc;this.Bd(k.jd,k.yd,c);var m=new Bc;for(b=0;b<2;++b){m.jd[b]=this.Ua[b][j.wa[b]].value;m.yd[b]=this.Ua[b][j.Ea[b]].value}for(b=0;b<2;++b){var n=this.Ua[b],o=j.wa[b],s=j.Ea[b],v=k.jd[b],u=k.yd[b],A=v-n[o].value,y=u-n[s].value;n[o].value=v;n[s].value=u;if(A<0)for(d=o;d>0&&v<n[d-1].value;){e=n[d];f=n[d-1];g=f.H;h=this.za[f.H];f.v++;if(f.qe()==l){this.ad(k,h)&&this.eb.Ad(a,g);h.Ea[b]++;e.v++}else{h.wa[b]++;e.v--}j.wa[b]--;e.$c(f);
--d}if(y>0)for(d=s;d<i-1&&n[d+1].value<=u;){e=n[d];f=n[d+1];g=f.H;h=this.za[g];f.v++;if(f.lc()==l){this.ad(k,h)&&this.eb.Ad(a,g);h.wa[b]--;e.v++}else{h.Ea[b]--;e.v--}j.Ea[b]++;e.$c(f);d++}if(A>0)for(d=o;d<i-1&&n[d+1].value<=v;){e=n[d];f=n[d+1];g=f.H;h=this.za[g];f.v--;if(f.qe()){this.ad(m,h)&&this.eb.Ed(a,g);h.Ea[b]--;e.v--}else{h.wa[b]--;e.v++}j.wa[b]++;e.$c(f);d++}if(y<0)for(d=s;d>0&&u<n[d-1].value;){e=n[d];f=n[d-1];g=f.H;h=this.za[g];f.v--;if(f.lc()==l){this.ad(m,h)&&this.eb.Ed(a,g);h.wa[b]++;
e.v--}else{h.Ea[b]++;e.v++}j.Ea[b]--;e.$c(f);d--}}}},hf:function(a,c,b){var d=[],e=[];this.Bd(d,e,a);a=[0];var f=[0];this.Hc(a,f,d[0],e[0],this.Ua[0],2*this.Fb,0);this.Hc(a,f,d[1],e[1],this.Ua[1],2*this.Fb,1);for(e=d=0;e<this.wb&&d<b;++e,++d)c[e]=this.za[this.wc[e]].C;this.wb=0;this.Dd();return d},Bd:function(a,c,b){var d=b.G.x,e=b.G.y;d=d<this.ia.B.x?d:this.ia.B.x;e=e<this.ia.B.y?e:this.ia.B.y;d=P(d,this.ia.G.x);e=P(e,this.ia.G.y);var f=b.B.x;b=b.B.y;f=f<this.ia.B.x?f:this.ia.B.x;b=b<this.ia.B.y?
b:this.ia.B.y;f=P(f,this.ia.G.x);b=P(b,this.ia.G.y);a[0]=this.Zb.x*(d-this.ia.G.x)&65534;c[0]=this.Zb.x*(f-this.ia.G.x)&65535|1;a[1]=this.Zb.y*(e-this.ia.G.y)&65534;c[1]=this.Zb.y*(b-this.ia.G.y)&65535|1},ad:function(a,c){for(var b=0;b<2;++b){var d=this.Ua[b];if(a.jd[b]>d[c.Ea[b]].value)return q;if(a.yd[b]<d[c.wa[b]].value)return q}return l},Hc:function(a,c,b,d,e,f,g){b=Dc(e,f,b);d=Dc(e,f,d);for(f=b;f<d;++f)e[f].lc()&&this.ne(e[f].H);if(b>0){f=b-1;for(var h=e[f].v;h;){if(e[f].lc())if(b<=this.za[e[f].H].Ea[g]){this.ne(e[f].H);
--h}--f}}a[0]=b;c[0]=d},ne:function(a){var c=this.za[a];if(c.timeStamp<this.zc){c.timeStamp=this.zc;c.ec=1}else{c.ec=2;this.wc[this.wb]=a;++this.wb}},Dd:function(){if(this.zc==65535){for(var a=0;a<1024;++a)this.za[a].timeStamp=0;this.zc=1}else++this.zc},eb:new vc,za:Array(8192),Ua:Array(2048),wc:Array(1024),wb:0,ia:p,Zb:new N,Fb:0,zc:0};Cc.prototype.Ec=function(){return this.eb.Ec()};
function Ec(a,c,b){var d=0,e,f=a.qd;e=a.za[f];a.qd=e.ic();e.ec=0;e.C=b;b=2*a.Fb;e=[];var g=[];a.Bd(e,g,c);for(c=0;c<2;++c){var h=a.Ua[c],i=0,j=0;i=[i];j=[j];a.Hc(i,j,e[c],g[c],h,b,c);i=i[0];j=j[0];d=[];var k=0,m=b-j,n,o;for(k=0;k<m;k++){d[k]=new zc;n=d[k];o=h[j+k];n.value=o.value;n.H=o.H;n.v=o.v}m=d.length;var s=j+2;for(k=0;k<m;k++){o=d[k];n=h[s+k];n.value=o.value;n.H=o.H;n.v=o.v}d=[];m=j-i;for(k=0;k<m;k++){d[k]=new zc;n=d[k];o=h[i+k];n.value=o.value;n.H=o.H;n.v=o.v}m=d.length;s=i+1;for(k=0;k<m;k++){o=
d[k];n=h[s+k];n.value=o.value;n.H=o.H;n.v=o.v}++j;h[i].value=e[c];h[i].H=f;h[j].value=g[c];h[j].H=f;h[i].v=i==0?0:h[i-1].v;h[j].v=h[j-1].v;for(d=i;d<j;++d)h[d].v++;for(d=i;d<b+2;++d){i=a.za[h[d].H];if(h[d].lc())i.wa[c]=d;else i.Ea[c]=d}}++a.Fb;for(b=0;b<a.wb;++b)a.eb.Ad(f,a.wc[b]);a.eb.Ec();a.wb=0;a.Dd();return f}function Dc(a,c,b){var d=0;for(c=c-1;d<=c;){var e=Math.floor((d+c)/2);if(a[e].value>b)c=e-1;else if(a[e].value<b)d=e+1;else return e}return d};function U(a,c,b){if(a==p)a=0;this.a=new N;this.b=new N;if(c!=p&&b!=p){R(this.a,c);R(this.b,b)}else{c=Math.cos(a);a=Math.sin(a);this.a.x=c;this.b.x=-a;this.a.y=a;this.b.y=c}}t=U.prototype;t.g=function(a){var c=Math.cos(a);a=Math.sin(a);this.a.x=c;this.b.x=-a;this.a.y=a;this.b.y=c};t.Cd=function(){return new U(0,this.a,this.b)};function Fc(a,c){R(a.a,c.a);R(a.b,c.b)}function Gc(a,c){a.a.x+=c.a.x;a.a.y+=c.a.y;a.b.x+=c.b.x;a.b.y+=c.b.y}t.qa=function(){this.a.x=0;this.b.x=0;this.a.y=0;this.b.y=0};
function Hc(a,c){var b=a.a.x,d=a.b.x,e=a.a.y,f=a.b.y,g=b*f-d*e;g=1/g;c.a.x=g*f;c.b.x=-g*d;c.a.y=-g*e;c.b.y=g*b;return c}t.Gd=function(a,c,b){var d=this.a.x,e=this.b.x,f=this.a.y,g=this.b.y,h=d*g-e*f;h=1/h;a.x=h*(g*c-e*b);a.y=h*(d*b-f*c);return a};t.fc=function(){this.a.fc();this.b.fc()};function Ic(){this.ea=new N(0,0)}Ic.prototype={fb:0,ea:new N(0,0),jc:0};function Jc(a,c){this.d=new U;this.c=new N;this.Ya=a.C;this.la=a.bb;this.ma=a.Sa;this.w=c;this.ba=65535;this.sc=0;this.Ta=a.Ta;this.Za=a.Za;this.qc=a.Qb}Jc.prototype.Zc=r();Jc.prototype.ic=aa("p");Jc.prototype.gc=function(){if(this.ba!=65535){this.w.Q.Qa.gc(this.ba);this.ba=65535}};Jc.prototype.Hd=r();var cc=0,bc=2,mc=4;function Kc(a,c,b){this.d=new U;this.c=new N;this.Ya=a.C;this.la=a.bb;this.ma=a.Sa;this.w=c;this.ba=65535;this.sc=0;this.Ta=a.Ta;this.Za=a.Za;this.qc=a.Qb;this.Ra=new N;this.Ra.g(a.Ba.x-b.x,a.Ba.y-b.y);this.na=cc;this.ja=a.xb;Fc(this.d,this.w.d);a=this.d.a.x*this.Ra.x+this.d.b.x*this.Ra.y;c=this.d.a.y*this.Ra.x+this.d.b.y*this.Ra.y;this.c.x=this.w.c.x+a;this.c.y=this.w.c.y+c;this.sc=Math.sqrt(a*a+c*c)+this.ja;a=new Fb;a.G.g(this.c.x-this.ja,this.c.y-this.ja);a.B.g(this.c.x+this.ja,this.c.y+this.ja);
c=this.w.Q.Qa;this.ba=c.kc(a)?Ec(c,a,this):65535;this.ba==65535&&Lc(this.w)}B(Kc,Jc);
Kc.prototype.Hd=function(a,c,b,d){Fc(this.d,d);this.c.x=d.a.x*this.Ra.x+d.b.x*this.Ra.y+b.x;this.c.y=d.a.y*this.Ra.x+d.b.y*this.Ra.y+b.y;if(this.ba!=65535){b=a.x+(c.a.x*this.Ra.x+c.b.x*this.Ra.y);c=a.y+(c.a.y*this.Ra.x+c.b.y*this.Ra.y);d=Math.max(b,this.c.x);var e=Math.max(c,this.c.y);a=new Fb;a.G.g(Math.min(b,this.c.x)-this.ja,Math.min(c,this.c.y)-this.ja);a.B.g(d+this.ja,e+this.ja);b=this.w.Q.Qa;b.kc(a)?b.re(this.ba,a):Lc(this.w)}};
Kc.prototype.Zc=function(a){if(this.ba!=65535){a.gc(this.ba);var c=new Fb;c.G.g(this.c.x-this.ja,this.c.y-this.ja);c.B.g(this.c.x+this.ja,this.c.y+this.ja);this.ba=a.kc(c)?Ec(a,c,this):65535;this.ba==65535&&Lc(this.w)}};function Mc(){this.Fa=new U;this.ea=new N;this.T=new N};function Nc(a,c,b){this.d=new U;this.c=new N;this.Ya=a.C;this.la=a.bb;this.ma=a.Sa;this.w=c;this.ba=65535;this.sc=0;this.Ta=a.Ta;this.Za=a.Za;this.qc=a.Qb;this.Ja=new Fb;this.pa=new U;this.Ca=new N;this.t=new Mc;var d=0,e;c=new Fb;this.u=Array(8);this.Vb=Array(8);this.db=Array(8);this.na=bc;var f=new U(a.Bb);if(a.type==1){this.Ca.x=a.Ba.x-b.x;this.Ca.y=a.Ba.y-b.y;this.Oa=4;b=a.T.x;e=a.T.y;d=Math.max(0,b-0.3);var g=Math.max(0,e-0.3);a=this.u[0]=new N;a.x=f.a.x*b+f.b.x*e;a.y=f.a.y*b+f.b.y*e;a=this.u[1]=
new N;a.x=f.a.x*-b+f.b.x*e;a.y=f.a.y*-b+f.b.y*e;a=this.u[2]=new N;a.x=f.a.x*-b+f.b.x*-e;a.y=f.a.y*-b+f.b.y*-e;a=this.u[3]=new N;a.x=f.a.x*b+f.b.x*-e;a.y=f.a.y*b+f.b.y*-e;a=this.Vb[0]=new N;a.x=f.a.x*d+f.b.x*g;a.y=f.a.y*d+f.b.y*g;a=this.Vb[1]=new N;a.x=f.a.x*-d+f.b.x*g;a.y=f.a.y*-d+f.b.y*g;a=this.Vb[2]=new N;a.x=f.a.x*-d+f.b.x*-g;a.y=f.a.y*-d+f.b.y*-g;a=this.Vb[3]=new N;a.x=f.a.x*d+f.b.x*-g;a.y=f.a.y*d+f.b.y*-g}else{this.Oa=a.Dc;d=a.Ib;e=a.Dc;for(var h=g=0,i=0,j=1/3,k=0;k<e;++k){var m=d[k].x,n=d[k].y,
o=k+1<e?d[k+1].x:d[0].x,s=k+1<e?d[k+1].y:d[0].y,v=0.5*((m-0)*(s-0)-(n-0)*(o-0));i+=v;g+=v*j*(0+m+o);h+=v*j*(0+n+s)}g*=1/i;h*=1/i;Oc.g(g,h);g=Oc.x;h=Oc.y;this.Ca.x=a.Ba.x+(f.a.x*g+f.b.x*h)-b.x;this.Ca.y=a.Ba.y+(f.a.y*g+f.b.y*h)-b.y;for(d=0;d<this.Oa;++d){this.u[d]=new N;this.Vb[d]=new N;b=a.Ib[d].x-g;e=a.Ib[d].y-h;this.u[d].x=f.a.x*b+f.b.x*e;this.u[d].y=f.a.y*b+f.b.y*e;b=this.u[d].x;e=this.u[d].y;i=Math.sqrt(b*b+e*e);if(i>Number.MIN_VALUE){b*=1/i;e*=1/i}this.Vb[d].x=this.u[d].x-0.3*b;this.Vb[d].y=
this.u[d].y-0.3*e}}a=f=Number.MAX_VALUE;b=-Number.MAX_VALUE;e=-Number.MAX_VALUE;for(d=this.sc=0;d<this.Oa;++d){g=this.u[d];f=Math.min(f,g.x);a=Math.min(a,g.y);b=Math.max(b,g.x);e=Math.max(e,g.y);this.sc=Math.max(this.sc,yb(g))}d=this.t.Fa;d.a.x=1;d.b.x=0;d.a.y=0;d.b.y=1;this.t.ea.g((f+b)*0.5,(a+e)*0.5);this.t.T.g((b-f)*0.5,(e-a)*0.5);for(d=a=f=0;d<this.Oa;++d){this.db[d]=new N;f=d;a=d+1<this.Oa?d+1:0;this.db[d].x=this.u[a].y-this.u[f].y;this.db[d].y=-(this.u[a].x-this.u[f].x);f=this.db[d];a=yb(f);
if(!(a<Number.MIN_VALUE)){a=1/a;f.x*=a;f.y*=a}}for(d=0;d<this.Oa;++d);Fc(this.d,this.w.d);this.c.x=this.w.c.x+(this.d.a.x*this.Ca.x+this.d.b.x*this.Ca.y);this.c.y=this.w.c.y+(this.d.a.y*this.Ca.x+this.d.b.y*this.Ca.y);Pc.a.x=this.d.a.x*this.t.Fa.a.x+this.d.b.x*this.t.Fa.a.y;Pc.a.y=this.d.a.y*this.t.Fa.a.x+this.d.b.y*this.t.Fa.a.y;Pc.b.x=this.d.a.x*this.t.Fa.b.x+this.d.b.x*this.t.Fa.b.y;Pc.b.y=this.d.a.y*this.t.Fa.b.x+this.d.b.y*this.t.Fa.b.y;Pc.fc();b=Pc.a.x*this.t.T.x+Pc.b.x*this.t.T.y;e=Pc.a.y*
this.t.T.x+Pc.b.y*this.t.T.y;f=this.c.x+(this.d.a.x*this.t.ea.x+this.d.b.x*this.t.ea.y);a=this.c.y+(this.d.a.y*this.t.ea.x+this.d.b.y*this.t.ea.y);c.G.x=f-b;c.G.y=a-e;c.B.x=f+b;c.B.y=a+e;f=this.w.Q.Qa;this.ba=f.kc(c)?Ec(f,c,this):65535;this.ba==65535&&Lc(this.w)}B(Nc,Jc);Nc.prototype.Ja=new Fb;Nc.prototype.pa=new U;
Nc.prototype.Hd=function(a,c,b,d){Fc(this.d,d);this.c.x=this.w.c.x+(d.a.x*this.Ca.x+d.b.x*this.Ca.y);this.c.y=this.w.c.y+(d.a.y*this.Ca.x+d.b.y*this.Ca.y);if(this.ba!=65535){var e,f;e=c.a;f=c.b;var g=this.t.Fa.a,h=this.t.Fa.b;this.pa.a.x=e.x*g.x+f.x*g.y;this.pa.a.y=e.y*g.x+f.y*g.y;this.pa.b.x=e.x*h.x+f.x*h.y;this.pa.b.y=e.y*h.x+f.y*h.y;this.pa.fc();e=this.Ca.x+this.t.ea.x;f=this.Ca.y+this.t.ea.y;g=a.x+(c.a.x*e+c.b.x*f);a=a.y+(c.a.y*e+c.b.y*f);e=this.pa.a.x*this.t.T.x+this.pa.b.x*this.t.T.y;f=this.pa.a.y*
this.t.T.x+this.pa.b.y*this.t.T.y;this.Ja.G.x=g-e;this.Ja.G.y=a-f;this.Ja.B.x=g+e;this.Ja.B.y=a+f;e=d.a;f=d.b;g=this.t.Fa.a;h=this.t.Fa.b;this.pa.a.x=e.x*g.x+f.x*g.y;this.pa.a.y=e.y*g.x+f.y*g.y;this.pa.b.x=e.x*h.x+f.x*h.y;this.pa.b.y=e.y*h.x+f.y*h.y;this.pa.fc();e=this.Ca.x+this.t.ea.x;f=this.Ca.y+this.t.ea.y;g=b.x+(d.a.x*e+d.b.x*f);a=b.y+(d.a.y*e+d.b.y*f);e=this.pa.a.x*this.t.T.x+this.pa.b.x*this.t.T.y;f=this.pa.a.y*this.t.T.x+this.pa.b.y*this.t.T.y;this.Ja.G.x=Math.min(this.Ja.G.x,g-e);this.Ja.G.y=
Math.min(this.Ja.G.y,a-f);this.Ja.B.x=Math.max(this.Ja.B.x,g+e);this.Ja.B.y=Math.max(this.Ja.B.y,a+f);b=this.w.Q.Qa;b.kc(this.Ja)?b.re(this.ba,this.Ja):Lc(this.w)}};
Nc.prototype.Zc=function(a){if(this.ba!=65535){a.gc(this.ba);var c=new U(0,L(this.d,this.t.Fa.a),L(this.d,this.t.Fa.b));c=new U(0,new N(O(c.a.x),O(c.a.y)),new N(O(c.b.x),O(c.b.y)));c=L(c,this.t.T);var b=L(this.d,this.t.ea);b.add(this.c);var d=new Fb;R(d.G,b);zb(d.G,c);R(d.B,b);d.B.add(c);this.ba=a.kc(d)?Ec(a,d,this):65535;this.ba==65535&&Lc(this.w)}};var Oc=new N,Pc=new U;function Qc(a,c){this.We=new U;this.c=new N;R(this.c,a.position);this.de=new N;R(this.de,this.c);var b=0,d,e;this.z=0;this.n=a.rotation;this.d=new U(0);this.d.g(this.n);this.Qe=this.n;this.Q=c;this.Gf=Q(1-a.vf,0,1);this.yf=Q(1-a.sf,0,1);this.Oc=new N(0,0);this.Ma=this.Re=0;var f=Array(64);for(b=0;b<64;b++)f[b]=new Ic;this.bc=0;this.Cb=new N(0,0);for(b=0;b<64;++b){d=a.Cc[b];if(d==p)break;e=f[b];var g=d,h=e;h.ea=new N(0,0);if(g.Aa==0){h.fb=0;h.ea.g(0,0);h.jc=0}switch(g.type){case cc:h.fb=g.Aa*Lb*g.xb*
g.xb;h.ea.g(0,0);h.jc=0.5*h.fb*g.xb*g.xb;break;case 1:h.fb=4*g.Aa*g.T.x*g.T.y;h.ea.g(0,0);h.jc=h.fb/3*Bb(g.T,g.T);break;case bc:h=h;var i=g.Ib,j=g.Dc;g=g.Aa;var k=new N;k.qa();for(var m=0,n=0,o=new N(0,0),s=1/3,v=0;v<j;++v){var u=o,A=i[v],y=v+1<j?i[v+1]:i[0],x=Db(A,u),z=Db(y,u),J=x.x*z.y-x.y*z.x,C=0.5*J;m+=C;var K=new N;R(K,u);K.add(A);K.add(y);K.scale(s*C);k.add(K);A=u.x;u=u.y;y=x.x;x=x.y;C=z.x;z=z.y;n+=J*(s*(0.25*(y*y+C*y+C*C)+(A*y+A*C))+0.5*A*A+(s*(0.25*(x*x+z*x+z*z)+(u*x+u*z))+0.5*u*u))}h.fb=
g*m;k.scale(1/m);h.ea=k;n=g*(n-m*Bb(k,k));h.jc=n;break;default:h.fb=0;h.ea.g(0,0);h.jc=0}this.Ma+=e.fb;this.Cb.x+=e.fb*(d.Ba.x+e.ea.x);this.Cb.y+=e.fb*(d.Ba.y+e.ea.y);++this.bc}if(this.Ma>0){this.Cb.scale(1/this.Ma);this.c.add(L(this.d,this.Cb))}else this.z|=lc;for(b=this.Mc=0;b<this.bc;++b){d=a.Cc[b];e=f[b];this.Mc+=e.jc;d=Db(Cb(d.Ba,e.ea),this.Cb);this.Mc+=e.fb*Bb(d,d)}this.i=this.Ma>0?1/this.Ma:0;if(this.Mc>0&&a.If==q)this.m=1/this.Mc;else this.m=this.Mc=0;this.f=Cb(a.wf,new N(-a.Id*this.Cb.y,
a.Id*this.Cb.x));this.l=a.Id;this.Hb=this.p=this.F=this.aa=this.Z=p;for(b=0;b<this.bc;++b){d=a.Cc[b];a:{e=d;f=this.Cb;switch(e.type){case cc:e=new Kc(e,this,f);break a;case 1:case bc:e=new Nc(e,this,f);break a}e=p}e.p=this.Hb;this.Hb=e}this.xc=0;if(a.rf)this.z|=Rc;if(a.tf)this.z|=V;if(this.z&V||this.i==0){this.f.g(0,0);this.l=0}this.Ya=a.C}function oc(a){a.z&=~V;a.xc=0}Qc.prototype.ic=aa("p");function Lc(a){a.z|=Sc;a.f.qa();a.l=0;for(a=a.Hb;a!=p;a=a.p)a.gc()}var lc=1,Sc=2,V=8,Rc=16;function Tc(){this.fd=new N;this.gd=new N}Tc.prototype={oa:p,ta:p,Wc:p,ie:p,Xe:p,hb:p,zd:p};function Uc(){this.D=new N;this.X=Array(2);for(var a=0;a<2;a++)this.X[a]=new Tc}Uc.prototype={Se:p,W:p,Y:p,bb:p,Sa:p,S:0};function Vc(a,c,b){this.Tb=[];this.Rd=b;b=0;var d,e;for(b=this.Sb=0;b<c;++b)this.Sb+=a[b].Da;for(b=0;b<this.Sb;b++)this.Tb[b]=new Uc;var f=0;for(b=0;b<c;++b){var g=a[b],h=g.I.w,i=g.J.w,j=g.Da,k=g.hc(),m=g.la;g=g.ma;for(var n=h.f.x,o=h.f.y,s=i.f.x,v=i.f.y,u=h.l,A=i.l,y=0;y<j;++y){var x=k[y],z=x.D.x,J=x.D.y,C=this.Tb[f];C.W=h;C.Y=i;C.Se=x;C.D.x=z;C.D.y=J;C.S=x.S;C.bb=m;C.Sa=g;for(var K=0;K<C.S;++K){var E=x.X[K],M=C.X[K];M.oa=E.oa;M.ta=E.ta;M.hb=E.hb;var W=E.position.x-h.c.x,oa=E.position.y-h.c.y,pa=
E.position.x-i.c.x;E=E.position.y-i.c.y;d=M.fd;e=h.d;d.x=W*e.a.x+oa*e.a.y;d.y=W*e.b.x+oa*e.b.y;d=M.gd;e=i.d;d.x=pa*e.a.x+E*e.a.y;d.y=pa*e.b.x+E*e.b.y;d=W*W+oa*oa;e=pa*pa+E*E;var Sa=W*z+oa*J,ka=pa*z+E*J,la=h.i+i.i;la+=h.m*(d-Sa*Sa)+i.m*(e-ka*ka);M.ie=1/la;ka=J;la=-z;Sa=W*ka+oa*la;ka=pa*ka+E*la;la=h.i+i.i;la+=h.m*(d-Sa*Sa)+i.m*(e-ka*ka);M.Xe=1/la;M.zd=0;if(M.hb>0)M.zd=-60*M.hb;W=C.D.x*(s+-A*E-n- -u*oa)+C.D.y*(v+A*pa-o-u*W);if(W<-30)M.zd+=-C.Sa*W}++f}}}
Vc.prototype={gf:function(){for(var a,c,b=0;b<this.Sb;++b){var d=this.Tb[b],e=d.W,f=d.Y,g=e.i,h=e.m,i=f.i,j=f.m,k=d.D.x,m=d.D.y,n=m,o=-k,s=0,v=0;if(Wc){v=d.S;for(s=0;s<v;++s){var u=d.X[s],A=u.oa*k+u.ta*n,y=u.oa*m+u.ta*o;c=e.d;a=u.fd;var x=c.a.x*a.x+c.b.x*a.y,z=c.a.y*a.x+c.b.y*a.y;c=f.d;a=u.gd;var J=c.a.x*a.x+c.b.x*a.y;a=c.a.y*a.x+c.b.y*a.y;e.l-=h*(x*y-z*A);e.f.x-=g*A;e.f.y-=g*y;f.l+=j*(J*y-a*A);f.f.x+=i*A;f.f.y+=i*y;u.Wc=0}}else{v=d.S;for(s=0;s<v;++s){e=d.X[s];e.oa=0;e.ta=0;e.Wc=0}}}},ob:function(){for(var a=
0,c,b,d,e,f,g,h,i,j=0;j<this.Sb;++j){var k=this.Tb[j],m=k.W,n=k.Y,o=m.l,s=m.f,v=n.l,u=n.f,A=m.i,y=m.m,x=n.i,z=n.m,J=k.D.x,C=k.D.y,K=C,E=-J,M=k.S;for(a=0;a<M;++a){c=k.X[a];f=m.d;g=c.fd;b=f.a.x*g.x+f.b.x*g.y;d=f.a.y*g.x+f.b.y*g.y;f=n.d;g=c.gd;e=f.a.x*g.x+f.b.x*g.y;f=f.a.y*g.x+f.b.y*g.y;g=u.x+-v*f-s.x- -o*d;h=u.y+v*e-s.y-o*b;g=-c.ie*(g*J+h*C-c.zd);h=P(c.oa+g,0);g=h-c.oa;i=g*J;g=g*C;s.x-=A*i;s.y-=A*g;o-=y*(b*g-d*i);u.x+=x*i;u.y+=x*g;v+=z*(e*g-f*i);c.oa=h;g=u.x+-v*f-s.x- -o*d;h=u.y+v*e-s.y-o*b;g=c.Xe*
-(g*K+h*E);h=k.bb*c.oa;h=Q(c.ta+g,-h,h);g=h-c.ta;i=g*K;g=g*E;s.x-=A*i;s.y-=A*g;o-=y*(b*g-d*i);u.x+=x*i;u.y+=x*g;v+=z*(e*g-f*i);c.ta=h}m.l=o;n.l=v}},nb:function(a){for(var c=0,b,d,e=0;e<this.Sb;++e){for(var f=this.Tb[e],g=f.W,h=f.Y,i=g.c,j=g.n,k=h.c,m=h.n,n=g.i,o=g.m,s=h.i,v=h.m,u=f.D.x,A=f.D.y,y=f.S,x=0;x<y;++x){var z=f.X[x];b=g.d;d=z.fd;var J=b.a.x*d.x+b.b.x*d.y,C=b.a.y*d.x+b.b.y*d.y;b=h.d;d=z.gd;var K=b.a.x*d.x+b.b.x*d.y;b=b.a.y*d.x+b.b.y*d.y;d=(k.x+K-(i.x+J))*u+(k.y+b-(i.y+C))*A+z.hb;c=c<d?c:d;
d=-z.ie*a*Q(d+0.15,-6,0);var E=z.Wc;z.Wc=P(E+d,0);d=z.Wc-E;z=d*u;d=d*A;i.x-=n*z;i.y-=n*d;j-=o*(J*d-C*z);g.d.g(j);k.x+=s*z;k.y+=s*d;m+=v*(K*d-b*z);h.d.g(m)}g.n=j;h.n=m}return c>=-0.15},ff:function(){for(var a=0;a<this.Sb;++a)for(var c=this.Tb[a],b=c.Se,d=0;d<c.S;++d){var e=b.X[d],f=c.X[d];e.oa=f.oa;e.ta=f.ta}},Rd:p,Tb:[],Sb:0};function Xc(a,c,b,d){var e=0;this.Qf=a;this.Rf=c;this.Tf=b;this.lb=this.Ub=this.La=0;this.qb=Array(a);for(e=0;e<a;e++)this.qb[e]=p;this.Ud=Array(c);for(e=0;e<c;e++)this.Ud[e]=p;this.Pc=Array(b);for(e=0;e<b;e++)this.Pc[e]=p;this.Rd=d}
Xc.prototype.Gd=function(a,c){var b=0,d;for(b=0;b<this.La;++b){d=this.qb[b];if(d.i!=0){d.f.add(new N(a.Pa*Cb(c,new N(d.i*d.Oc.x,d.i*d.Oc.y)).x,a.Pa*Cb(c,new N(d.i*d.Oc.x,d.i*d.Oc.y)).y));d.l+=a.Pa*d.m*d.Re;d.f.scale(d.Gf);d.l*=d.yf;R(d.de,d.c);d.Qe=d.n}}var e=new Vc(this.Ud,this.Ub,this.Rd);e.gf();for(b=0;b<this.lb;++b)this.Pc[b].Lb();for(b=0;b<a.Qd;++b){e.ob();for(d=0;d<this.lb;++d)this.Pc[d].ob(a)}for(b=0;b<this.La;++b){d=this.qb[b];if(d.i!=0){d.c.x+=a.Pa*d.f.x;d.c.y+=a.Pa*d.f.y;d.n+=a.Pa*d.l;d.d.g(d.n)}}for(b=
0;b<this.lb;++b);if(Yc)for(Zc=0;Zc<a.Qd;++Zc){d=e.nb(0.2);var f=l;for(b=0;b<this.lb;++b){var g=this.Pc[b].nb();f=f&&g}if(d&&f)break}e.ff();for(b=0;b<this.La;++b){d=this.qb[b];if(d.i!=0){d.d.g(d.n);e=d;e.We.g(e.Qe);for(f=e.Hb;f!=p;f=f.p)f.Hd(e.de,e.We,e.c,e.d);d.Oc.g(0,0);d.Re=0}}};var Zc=0;function X(){}X.prototype={sa:p,Rb:p,r:p,next:p};function $c(a){this.o=new X;this.q=new X;this.na=a.type;this.p=this.F=p;this.h=a.W;this.e=a.Y;this.sb=a.ab;this.kb=q;this.Ya=a.C}$c.prototype={Jb:ba(p),Kb:ba(p),ic:aa("p"),Lb:r(),ob:r(),nb:ba(q),na:0,F:p,p:p,o:new X,q:new X,h:p,e:p,kb:p,sb:p,Ya:p};function ad(a){this.o=new X;this.q=new X;this.na=a.type;this.p=this.F=p;this.h=a.W;this.e=a.Y;this.sb=a.ab;this.kb=q;this.Ya=a.C;this.Ka=new U;this.ua=new U;this.va=new U;this.$a=new U;this.j=new N;this.k=new N;this.Xa=new N;this.Gb=new U;var c,b,d;c=this.h.d;b=a.ka.x-this.h.c.x;d=a.ka.y-this.h.c.y;this.j.x=b*c.a.x+d*c.a.y;this.j.y=b*c.b.x+d*c.b.y;c=this.e.d;b=a.ka.x-this.e.c.x;d=a.ka.y-this.e.c.y;this.k.x=b*c.a.x+d*c.a.y;this.k.y=b*c.b.x+d*c.b.y;this.Ie=this.e.n-this.h.n;this.Xa.g(0,0);this.fa=this.s=
this.ga=0;this.$d=a.De;this.ee=a.Ze;this.Oe=a.he;this.be=a.dc;this.tb=a.Ic;this.oc=a.Ab}G(ad.prototype,$c.prototype);ad.prototype.Jb=function(){var a=this.h.d;return new N(this.h.c.x+(a.a.x*this.j.x+a.b.x*this.j.y),this.h.c.y+(a.a.y*this.j.x+a.b.y*this.j.y))};ad.prototype.Kb=function(){var a=this.e.d;return new N(this.e.c.x+(a.a.x*this.k.x+a.b.x*this.k.y),this.e.c.y+(a.a.y*this.k.x+a.b.y*this.k.y))};function bd(a){return a.e.n-a.h.n}new U;t=ad.prototype;t.ua=new U;t.va=new U;t.$a=new U;
t.Lb=function(){var a=this.h,c=this.e,b;b=a.d;var d=b.a.x*this.j.x+b.b.x*this.j.y,e=b.a.y*this.j.x+b.b.y*this.j.y;b=c.d;var f=b.a.x*this.k.x+b.b.x*this.k.y;b=b.a.y*this.k.x+b.b.y*this.k.y;var g=a.i,h=c.i,i=a.m,j=c.m;this.ua.a.x=g+h;this.ua.b.x=0;this.ua.a.y=0;this.ua.b.y=g+h;this.va.a.x=i*e*e;this.va.b.x=-i*d*e;this.va.a.y=-i*d*e;this.va.b.y=i*d*d;this.$a.a.x=j*b*b;this.$a.b.x=-j*f*b;this.$a.a.y=-j*f*b;this.$a.b.y=j*f*f;Fc(this.Ka,this.ua);Gc(this.Ka,this.va);Gc(this.Ka,this.$a);Hc(this.Ka,this.Gb);
this.Na=1/(i+j);if(this.oc==q)this.ga=0;if(this.tb){var k=c.n-a.n-this.Ie;if(O(this.ee-this.$d)<2*Mb)this.N=3;else if(k<=this.$d){if(this.N!=1)this.s=0;this.N=1}else if(k>=this.ee){if(this.N!=2)this.s=0;this.N=2}else this.s=this.N=0}else this.s=0;if(Wc){a.f.x-=g*this.Xa.x;a.f.y-=g*this.Xa.y;a.l-=i*(d*this.Xa.y-e*this.Xa.x+this.ga+this.s);c.f.x+=h*this.Xa.x;c.f.y+=h*this.Xa.y;c.l+=j*(f*this.Xa.y-b*this.Xa.x+this.ga+this.s)}else{this.Xa.qa();this.s=this.ga=0}this.fa=0};
t.ob=function(a){var c=this.h,b=this.e,d;d=c.d;var e=d.a.x*this.j.x+d.b.x*this.j.y,f=d.a.y*this.j.x+d.b.y*this.j.y;d=b.d;var g=d.a.x*this.k.x+d.b.x*this.k.y;d=d.a.y*this.k.x+d.b.y*this.k.y;var h=b.f.x+-b.l*d-c.f.x- -c.l*f,i=b.f.y+b.l*g-c.f.y-c.l*e,j=-(this.Gb.a.x*h+this.Gb.b.x*i);h=-(this.Gb.a.y*h+this.Gb.b.y*i);this.Xa.x+=j;this.Xa.y+=h;c.f.x-=c.i*j;c.f.y-=c.i*h;c.l-=c.m*(e*h-f*j);b.f.x+=b.i*j;b.f.y+=b.i*h;b.l+=b.m*(g*h-d*j);if(this.oc&&this.N!=3){e=-this.Na*(b.l-c.l-this.be);f=this.ga;this.ga=Q(this.ga+
e,-a.Pa*this.Oe,a.Pa*this.Oe);e=this.ga-f;c.l-=c.m*e;b.l+=b.m*e}if(this.tb&&this.N!=0){e=-this.Na*(b.l-c.l);if(this.N==3)this.s+=e;else if(this.N==1){a=this.s;this.s=P(this.s+e,0);e=this.s-a}else if(this.N==2){a=this.s;this.s=this.s+e<0?this.s+e:0;e=this.s-a}c.l-=c.m*e;b.l+=b.m*e}};
t.nb=function(){var a,c=this.h,b=this.e,d=0;d=c.d;var e=d.a.x*this.j.x+d.b.x*this.j.y,f=d.a.y*this.j.x+d.b.y*this.j.y;d=b.d;a=d.a.x*this.k.x+d.b.x*this.k.y;var g=d.a.y*this.k.x+d.b.y*this.k.y,h=b.c.x+a-(c.c.x+e),i=b.c.y+g-(c.c.y+f);d=Math.sqrt(h*h+i*i);var j=c.i,k=b.i,m=c.m,n=b.m;this.ua.a.x=j+k;this.ua.b.x=0;this.ua.a.y=0;this.ua.b.y=j+k;this.va.a.x=m*f*f;this.va.b.x=-m*e*f;this.va.a.y=-m*e*f;this.va.b.y=m*e*e;this.$a.a.x=n*g*g;this.$a.b.x=-n*a*g;this.$a.a.y=-n*a*g;this.$a.b.y=n*a*a;Fc(this.Ka,this.ua);
Gc(this.Ka,this.va);Gc(this.Ka,this.$a);this.Ka.Gd(cd,-h,-i);h=cd.x;i=cd.y;c.c.x-=c.i*h;c.c.y-=c.i*i;c.n-=c.m*(e*i-f*h);c.d.g(c.n);b.c.x+=b.i*h;b.c.y+=b.i*i;b.n+=b.m*(a*i-g*h);b.d.g(b.n);e=0;if(this.tb&&this.N!=0){a=b.n-c.n-this.Ie;f=0;if(this.N==3){a=Q(a,-Nb,Nb);f=-this.Na*a;e=O(a)}else if(this.N==1){a=a-this.$d;e=P(0,-a);a=Q(a+Mb,-Nb,0);f=-this.Na*a;a=this.fa;this.fa=P(this.fa+f,0);f=this.fa-a}else if(this.N==2){a=a-this.ee;e=P(0,a);a=Q(a-Mb,0,Nb);f=-this.Na*a;a=this.fa;this.fa=this.fa+f<0?this.fa+
f:0;f=this.fa-a}c.n-=c.m*f;c.d.g(c.n);b.n+=b.m*f;b.d.g(b.n)}return d<=0.15&&e<=Mb};var cd=new N;function dd(){this.K=new N;this.L=new N}dd.prototype={K:new N,ca:p,L:new N,da:p,qa:function(){this.K.qa();this.ca=0;this.L.qa();this.da=0},g:function(a,c,b,d){R(this.K,a);this.ca=c;R(this.L,b);this.da=d},Yc:function(a,c,b,d){return this.K.x*a.x+this.K.y*a.y+this.ca*c+(this.L.x*b.x+this.L.y*b.y)+this.da*d}};function ed(a){this.o=new X;this.q=new X;this.na=a.type;this.p=this.F=p;this.h=a.W;this.e=a.Y;this.sb=a.ab;this.kb=q;this.Ya=a.C;this.j=new N;this.k=new N;this.xa=new N;this.mb=new N;this.M=new dd;this.A=new dd;var c,b,d;c=this.h.d;b=a.ka.x-this.h.c.x;d=a.ka.y-this.h.c.y;this.j.g(b*c.a.x+d*c.a.y,b*c.b.x+d*c.b.y);c=this.e.d;b=a.ka.x-this.e.c.x;d=a.ka.y-this.e.c.y;this.k.g(b*c.a.x+d*c.a.y,b*c.b.x+d*c.b.y);c=this.h.d;b=a.axis.x;d=a.axis.y;this.xa.g(b*c.a.x+d*c.a.y,b*c.b.x+d*c.b.y);this.mb.x=-this.xa.y;
this.mb.y=this.xa.x;this.Ef=this.e.n-this.h.n;this.M.qa();this.md=this.Sd=this.Db=this.Sc=0;this.A.qa();this.fa=this.s=this.ga=this.Na=0;this.ae=a.Ee;this.fe=a.$e;this.Ne=a.ge;this.be=a.dc;this.tb=a.Ic;this.oc=a.Ab}G(ed.prototype,$c.prototype);t=ed.prototype;t.Jb=function(){var a=this.h,c=new N;R(c,this.j);Eb(c,a.d);c.add(a.c);return c};t.Kb=function(){var a=this.e,c=new N;R(c,this.k);Eb(c,a.d);c.add(a.c);return c};
function fd(a){var c=a.h,b=a.e,d;d=c.d;var e=d.a.x*a.j.x+d.b.x*a.j.y,f=d.a.y*a.j.x+d.b.y*a.j.y;d=b.d;e=b.c.x+(d.a.x*a.k.x+d.b.x*a.k.y)-(c.c.x+e);b=b.c.y+(d.a.y*a.k.x+d.b.y*a.k.y)-(c.c.y+f);d=c.d;return(d.a.x*a.xa.x+d.b.x*a.xa.y)*e+(d.a.y*a.xa.x+d.b.y*a.xa.y)*b}
t.Lb=function(){var a=this.h,c=this.e,b;b=a.d;var d=b.a.x*this.j.x+b.b.x*this.j.y,e=b.a.y*this.j.x+b.b.y*this.j.y;b=c.d;var f=b.a.x*this.k.x+b.b.x*this.k.y,g=b.a.y*this.k.x+b.b.y*this.k.y,h=a.i,i=c.i,j=a.m,k=c.m;b=a.d;var m=b.a.x*this.mb.x+b.b.x*this.mb.y;b=b.a.y*this.mb.x+b.b.y*this.mb.y;var n=c.c.x+f-a.c.x,o=c.c.y+g-a.c.y;this.M.K.x=-m;this.M.K.y=-b;this.M.L.x=m;this.M.L.y=b;this.M.ca=-(n*b-o*m);this.M.da=f*b-g*m;this.Sc=h+j*this.M.ca*this.M.ca+i+k*this.M.da*this.M.da;this.Sc=1/this.Sc;this.Sd=
1/(j+k);if(this.tb||this.oc){b=a.d;m=b.a.x*this.xa.x+b.b.x*this.xa.y;b=b.a.y*this.xa.x+b.b.y*this.xa.y;this.A.K.x=-m;this.A.K.y=-b;this.A.L.x=m;this.A.L.y=b;this.A.ca=-(n*b-o*m);this.A.da=f*b-g*m;this.Na=h+j*this.A.ca*this.A.ca+i+k*this.A.da*this.A.da;this.Na=1/this.Na;if(this.tb){d=m*(n-d)+b*(o-e);if(O(this.fe-this.ae)<0.3)this.N=3;else if(d<=this.ae){if(this.N!=1)this.s=0;this.N=1}else if(d>=this.fe){if(this.N!=2)this.s=0;this.N=2}else this.s=this.N=0}}if(this.oc==q)this.ga=0;if(this.tb==q)this.s=
0;if(Wc){d=this.Db*this.M.K.y+(this.ga+this.s)*this.A.K.y;e=this.Db*this.M.L.x+(this.ga+this.s)*this.A.L.x;f=this.Db*this.M.L.y+(this.ga+this.s)*this.A.L.y;g=this.Db*this.M.ca-this.md+(this.ga+this.s)*this.A.ca;n=this.Db*this.M.da+this.md+(this.ga+this.s)*this.A.da;a.f.x+=h*(this.Db*this.M.K.x+(this.ga+this.s)*this.A.K.x);a.f.y+=h*d;a.l+=j*g;c.f.x+=i*e;c.f.y+=i*f;c.l+=k*n}else this.ga=this.s=this.md=this.Db=0;this.fa=0};
t.ob=function(a){var c=this.h,b=this.e,d=c.i,e=b.i,f=c.m,g=b.m,h=-this.Sc*this.M.Yc(c.f,c.l,b.f,b.l);this.Db+=h;c.f.x+=d*h*this.M.K.x;c.f.y+=d*h*this.M.K.y;c.l+=f*h*this.M.ca;b.f.x+=e*h*this.M.L.x;b.f.y+=e*h*this.M.L.y;b.l+=g*h*this.M.da;h=-this.Sd*(b.l-c.l);this.md+=h;c.l-=f*h;b.l+=g*h;if(this.oc&&this.N!=3){h=-this.Na*(this.A.Yc(c.f,c.l,b.f,b.l)-this.be);var i=this.ga;this.ga=Q(this.ga+h,-a.Pa*this.Ne,a.Pa*this.Ne);h=this.ga-i;c.f.x+=d*h*this.A.K.x;c.f.y+=d*h*this.A.K.y;c.l+=f*h*this.A.ca;b.f.x+=
e*h*this.A.L.x;b.f.y+=e*h*this.A.L.y;b.l+=g*h*this.A.da}if(this.tb&&this.N!=0){h=-this.Na*this.A.Yc(c.f,c.l,b.f,b.l);if(this.N==3)this.s+=h;else if(this.N==1){a=this.s;this.s=P(this.s+h,0);h=this.s-a}else if(this.N==2){a=this.s;this.s=this.s+h<0?this.s+h:0;h=this.s-a}c.f.x+=d*h*this.A.K.x;c.f.y+=d*h*this.A.K.y;c.l+=f*h*this.A.ca;b.f.x+=e*h*this.A.L.x;b.f.y+=e*h*this.A.L.y;b.l+=g*h*this.A.da}};
t.nb=function(){var a,c,b=this.h,d=this.e,e=b.i,f=d.i,g=b.m,h=d.m,i;i=b.d;var j=i.a.x*this.j.x+i.b.x*this.j.y,k=i.a.y*this.j.x+i.b.y*this.j.y;i=d.d;a=i.a.x*this.k.x+i.b.x*this.k.y;i=i.a.y*this.k.x+i.b.y*this.k.y;j=b.c.x+j;k=b.c.y+k;a=d.c.x+a;i=d.c.y+i;a=a-j;j=i-k;i=b.d;var m=(i.a.x*this.mb.x+i.b.x*this.mb.y)*a+(i.a.y*this.mb.x+i.b.y*this.mb.y)*j;m=Q(m,-6,6);c=-this.Sc*m;b.c.x+=e*c*this.M.K.x;b.c.y+=e*c*this.M.K.y;b.n+=g*c*this.M.ca;d.c.x+=f*c*this.M.L.x;d.c.y+=f*c*this.M.L.y;d.n+=h*c*this.M.da;m=
O(m);c=d.n-b.n-this.Ef;c=Q(c,-Nb,Nb);var n=-this.Sd*c;b.n-=b.m*n;b.d.g(b.n);d.n+=d.m*n;d.d.g(d.n);n=O(c);if(this.tb&&this.N!=0){i=b.d;j=i.a.x*this.j.x+i.b.x*this.j.y;k=i.a.y*this.j.x+i.b.y*this.j.y;i=d.d;a=i.a.x*this.k.x+i.b.x*this.k.y;i=i.a.y*this.k.x+i.b.y*this.k.y;j=b.c.x+j;k=b.c.y+k;a=d.c.x+a;i=d.c.y+i;a=a-j;j=i-k;i=b.d;i=(i.a.x*this.xa.x+i.b.x*this.xa.y)*a+(i.a.y*this.xa.x+i.b.y*this.xa.y)*j;a=0;if(this.N==3){a=Q(i,-6,6);a=-this.Na*a;m=P(m,O(c))}else if(this.N==1){a=i-this.ae;m=P(m,-a);a=Q(a+
0.15,-6,0);a=-this.Na*a;c=this.fa;this.fa=P(this.fa+a,0);a=this.fa-c}else if(this.N==2){a=i-this.fe;m=P(m,a);a=Q(a-0.15,0,6);a=-this.Na*a;c=this.fa;this.fa=this.fa+a<0?this.fa+a:0;a=this.fa-c}b.c.x+=e*a*this.A.K.x;b.c.y+=e*a*this.A.K.y;b.n+=g*a*this.A.ca;b.d.g(b.n);d.c.x+=f*a*this.A.L.x;d.c.y+=f*a*this.A.L.y;d.n+=h*a*this.A.da;d.d.g(d.n)}return m<=0.15&&n<=Mb};function gd(a){this.o=new X;this.q=new X;this.na=a.type;this.p=this.F=p;this.h=a.W;this.e=a.Y;this.sb=a.ab;this.kb=q;this.Ya=a.C;this.Ka=new U;this.ua=new U;this.va=new U;this.cb=new N;this.yc=new N;this.V=new N;this.Gb=new U;this.ld=new N;R(this.yc,a.target);var c=this.yc.x-this.e.c.x,b=this.yc.y-this.e.c.y;this.cb.x=c*this.e.d.a.x+b*this.e.d.a.y;this.cb.y=c*this.e.d.b.x+b*this.e.d.b.y;this.Ke=a.Vf;this.V.qa();b=this.e.Ma;var d=2*Lb*a.Pf;c=2*b*a.Of*d;b=b*d*d;this.rd=1/(c+a.Ye*b);this.Fe=a.Ye*b/(c+
a.Ye*b)}G(gd.prototype,$c.prototype);t=gd.prototype;t.Jb=aa("yc");t.Kb=function(){var a=L(this.e.d,this.cb);a.add(this.e.c);return a};
t.Lb=function(){var a=this.e,c;c=a.d;var b=c.a.x*this.cb.x+c.b.x*this.cb.y;c=c.a.y*this.cb.x+c.b.y*this.cb.y;var d=a.i,e=a.m;this.ua.a.x=d;this.ua.b.x=0;this.ua.a.y=0;this.ua.b.y=d;this.va.a.x=e*c*c;this.va.b.x=-e*b*c;this.va.a.y=-e*b*c;this.va.b.y=e*b*b;Fc(this.Ka,this.ua);Gc(this.Ka,this.va);this.Ka.a.x+=this.rd;this.Ka.b.y+=this.rd;Hc(this.Ka,this.Gb);this.ld.x=a.c.x+b-this.yc.x;this.ld.y=a.c.y+c-this.yc.y;a.l*=0.98;var f=this.V.x,g=this.V.y;a.f.x+=d*f;a.f.y+=d*g;a.l+=e*(b*g-c*f)};
t.ob=function(a){var c=this.e,b;b=c.d;var d=b.a.x*this.cb.x+b.b.x*this.cb.y,e=b.a.y*this.cb.x+b.b.y*this.cb.y,f=c.f.x+-c.l*e,g=c.f.y+c.l*d;b=this.Gb;f=f+this.Fe*a.Pd*this.ld.x+this.rd*this.V.x;var h=g+this.Fe*a.Pd*this.ld.y+this.rd*this.V.y;g=-(b.a.x*f+b.b.x*h);h=-(b.a.y*f+b.b.y*h);b=this.V.x;f=this.V.y;this.V.x+=g;this.V.y+=h;g=this.V.Kf();g>a.Pa*this.Ke&&this.V.Lf(a.Pa*this.Ke/g);g=this.V.x-b;h=this.V.y-f;c.f.x+=c.i*g;c.f.y+=c.i*h;c.l+=c.m*(d*h-e*g)};t.nb=ba(l);function hd(a){this.o=new X;this.q=new X;this.na=a.type;this.p=this.F=p;this.h=a.W;this.e=a.Y;this.sb=a.ab;this.kb=q;this.Ya=a.C;this.j=new N;this.k=new N;this.ha=new N;var c,b,d;c=this.h.d;b=a.Nb.x-this.h.c.x;d=a.Nb.y-this.h.c.y;this.j.x=b*c.a.x+d*c.a.y;this.j.y=b*c.b.x+d*c.b.y;c=this.e.d;b=a.Ob.x-this.e.c.x;d=a.Ob.y-this.e.c.y;this.k.x=b*c.a.x+d*c.a.y;this.k.y=b*c.b.x+d*c.b.y;b=a.Ob.x-a.Nb.x;d=a.Ob.y-a.Nb.y;this.Ff=Math.sqrt(b*b+d*d);this.V=0}G(hd.prototype,$c.prototype);t=hd.prototype;
t.Lb=function(){var a;a=this.h.d;var c=a.a.x*this.j.x+a.b.x*this.j.y,b=a.a.y*this.j.x+a.b.y*this.j.y;a=this.e.d;var d=a.a.x*this.k.x+a.b.x*this.k.y;a=a.a.y*this.k.x+a.b.y*this.k.y;this.ha.x=this.e.c.x+d-this.h.c.x-c;this.ha.y=this.e.c.y+a-this.h.c.y-b;var e=Math.sqrt(this.ha.x*this.ha.x+this.ha.y*this.ha.y);e>0.15?this.ha.scale(1/e):this.ha.qa();e=c*this.ha.y-b*this.ha.x;var f=d*this.ha.y-a*this.ha.x;this.Ma=this.h.i+this.h.m*e*e+this.e.i+this.e.m*f*f;this.Ma=1/this.Ma;if(Wc){e=this.V*this.ha.x;f=
this.V*this.ha.y;this.h.f.x-=this.h.i*e;this.h.f.y-=this.h.i*f;this.h.l-=this.h.m*(c*f-b*e);this.e.f.x+=this.e.i*e;this.e.f.y+=this.e.i*f;this.e.l+=this.e.m*(d*f-a*e)}else this.V=0};
t.ob=function(){var a;a=this.h.d;var c=a.a.x*this.j.x+a.b.x*this.j.y,b=a.a.y*this.j.x+a.b.y*this.j.y;a=this.e.d;var d=a.a.x*this.k.x+a.b.x*this.k.y;a=a.a.y*this.k.x+a.b.y*this.k.y;var e=-this.Ma*(this.ha.x*(this.e.f.x+-this.e.l*a-(this.h.f.x+-this.h.l*b))+this.ha.y*(this.e.f.y+this.e.l*d-(this.h.f.y+this.h.l*c)));this.V+=e;var f=e*this.ha.x;e=e*this.ha.y;this.h.f.x-=this.h.i*f;this.h.f.y-=this.h.i*e;this.h.l-=this.h.m*(c*e-b*f);this.e.f.x+=this.e.i*f;this.e.f.y+=this.e.i*e;this.e.l+=this.e.m*(d*e-
a*f)};
t.nb=function(){var a;a=this.h.d;var c=a.a.x*this.j.x+a.b.x*this.j.y,b=a.a.y*this.j.x+a.b.y*this.j.y;a=this.e.d;var d=a.a.x*this.k.x+a.b.x*this.k.y;a=a.a.y*this.k.x+a.b.y*this.k.y;var e=this.e.c.x+d-this.h.c.x-c,f=this.e.c.y+a-this.h.c.y-b,g=Math.sqrt(e*e+f*f);e/=g;f/=g;g=g-this.Ff;g=Q(g,-6,6);var h=-this.Ma*g;this.ha.g(e,f);e=h*this.ha.x;f=h*this.ha.y;this.h.c.x-=this.h.i*e;this.h.c.y-=this.h.i*f;this.h.n-=this.h.m*(c*f-b*e);this.e.c.x+=this.e.i*e;this.e.c.y+=this.e.i*f;this.e.n+=this.e.m*(d*f-a*
e);this.h.d.g(this.h.n);this.e.d.g(this.e.n);return O(g)<0.15};t.Jb=function(){return Cb(this.h.c,L(this.h.d,this.j))};t.Kb=function(){return Cb(this.e.c,L(this.e.d,this.k))};function id(a){this.o=new X;this.q=new X;this.na=a.type;this.p=this.F=p;this.h=a.W;this.e=a.Y;this.sb=a.ab;this.kb=q;this.Ya=a.C;this.ub=new N;this.vb=new N;this.j=new N;this.k=new N;this.O=new N;this.P=new N;var c,b,d;this.Va=this.h.Q.pc;this.ub.x=a.Md.x-this.Va.c.x;this.ub.y=a.Md.y-this.Va.c.y;this.vb.x=a.Nd.x-this.Va.c.x;this.vb.y=a.Nd.y-this.Va.c.y;c=this.h.d;b=a.Nb.x-this.h.c.x;d=a.Nb.y-this.h.c.y;this.j.x=b*c.a.x+d*c.a.y;this.j.y=b*c.b.x+d*c.b.y;c=this.e.d;b=a.Ob.x-this.e.c.x;d=a.Ob.y-this.e.c.y;
this.k.x=b*c.a.x+d*c.a.y;this.k.y=b*c.b.x+d*c.b.y;this.$=a.Jf;b=a.Md.x-a.Nb.x;d=a.Md.y-a.Nb.y;c=Math.sqrt(b*b+d*d);b=a.Nd.x-a.Ob.x;d=a.Nd.y-a.Ob.y;c=P(0.5*jd,c);b=P(0.5*jd,Math.sqrt(b*b+d*d));this.Nc=c+this.$*b;this.Le=Q(a.Wf,c,this.Nc-this.$*jd);this.Me=Q(a.Xf,b,(this.Nc-jd)/this.$);this.Yb=this.Xb=this.Tc=0}G(id.prototype,$c.prototype);t=id.prototype;t.Jb=function(){var a=this.h.d;return new N(this.h.c.x+(a.a.x*this.j.x+a.b.x*this.j.y),this.h.c.y+(a.a.y*this.j.x+a.b.y*this.j.y))};
t.Kb=function(){var a=this.e.d;return new N(this.e.c.x+(a.a.x*this.k.x+a.b.x*this.k.y),this.e.c.y+(a.a.y*this.k.x+a.b.y*this.k.y))};
t.Lb=function(){var a=this.h,c=this.e,b;b=a.d;var d=b.a.x*this.j.x+b.b.x*this.j.y,e=b.a.y*this.j.x+b.b.y*this.j.y;b=c.d;var f=b.a.x*this.k.x+b.b.x*this.k.y;b=b.a.y*this.k.x+b.b.y*this.k.y;var g=c.c.x+f,h=c.c.y+b,i=this.Va.c.x+this.vb.x,j=this.Va.c.y+this.vb.y;this.O.g(a.c.x+d-(this.Va.c.x+this.ub.x),a.c.y+e-(this.Va.c.y+this.ub.y));this.P.g(g-i,h-j);g=yb(this.O);h=yb(this.P);g>0.15?this.O.scale(1/g):this.O.qa();h>0.15?this.P.scale(1/h):this.P.qa();if(g<this.Le)this.Xb=this.Yd=0;else{this.Yd=2;this.sd=
0}if(h<this.Me)this.Yb=this.Zd=0;else{this.Zd=2;this.td=0}g=d*this.O.y-e*this.O.x;h=f*this.P.y-b*this.P.x;this.Qc=a.i+a.m*g*g;this.Rc=c.i+c.m*h*h;this.ud=this.Qc+this.$*this.$*this.Rc;this.Qc=1/this.Qc;this.Rc=1/this.Rc;this.ud=1/this.ud;g=(-this.Tc-this.Xb)*this.O.x;h=(-this.Tc-this.Xb)*this.O.y;i=(-this.$*this.Tc-this.Yb)*this.P.x;j=(-this.$*this.Tc-this.Yb)*this.P.y;a.f.x+=a.i*g;a.f.y+=a.i*h;a.l+=a.m*(d*h-e*g);c.f.x+=c.i*i;c.f.y+=c.i*j;c.l+=c.m*(f*j-b*i)};
t.ob=function(){var a=this.h,c=this.e,b;b=a.d;var d=b.a.x*this.j.x+b.b.x*this.j.y,e=b.a.y*this.j.x+b.b.y*this.j.y;b=c.d;var f=b.a.x*this.k.x+b.b.x*this.k.y;b=b.a.y*this.k.x+b.b.y*this.k.y;var g,h,i,j;g=a.f.x+-a.l*e;h=a.f.y+a.l*d;i=c.f.x+-c.l*b;j=c.f.y+c.l*f;g=-(this.O.x*g+this.O.y*h)-this.$*(this.P.x*i+this.P.y*j);j=-this.ud*g;this.Tc+=j;g=-j*this.O.x;h=-j*this.O.y;i=-this.$*j*this.P.x;j=-this.$*j*this.P.y;a.f.x+=a.i*g;a.f.y+=a.i*h;a.l+=a.m*(d*h-e*g);c.f.x+=c.i*i;c.f.y+=c.i*j;c.l+=c.m*(f*j-b*i);if(this.Yd==
2){g=a.f.x+-a.l*e;h=a.f.y+a.l*d;g=-(this.O.x*g+this.O.y*h);j=-this.Qc*g;g=this.Xb;this.Xb=P(0,this.Xb+j);j=this.Xb-g;g=-j*this.O.x;h=-j*this.O.y;a.f.x+=a.i*g;a.f.y+=a.i*h;a.l+=a.m*(d*h-e*g)}if(this.Zd==2){i=c.f.x+-c.l*b;j=c.f.y+c.l*f;g=-(this.P.x*i+this.P.y*j);j=-this.Rc*g;g=this.Yb;this.Yb=P(0,this.Yb+j);j=this.Yb-g;i=-j*this.P.x;j=-j*this.P.y;c.f.x+=c.i*i;c.f.y+=c.i*j;c.l+=c.m*(f*j-b*i)}};
t.nb=function(){var a=this.h,c=this.e,b,d=this.Va.c.x+this.ub.x,e=this.Va.c.y+this.ub.y,f=this.Va.c.x+this.vb.x,g=this.Va.c.y+this.vb.y,h,i,j,k,m,n,o,s=0;b=a.d;h=b.a.x*this.j.x+b.b.x*this.j.y;i=b.a.y*this.j.x+b.b.y*this.j.y;b=c.d;j=b.a.x*this.k.x+b.b.x*this.k.y;b=b.a.y*this.k.x+b.b.y*this.k.y;k=a.c.x+h;m=a.c.y+i;n=c.c.x+j;o=c.c.y+b;this.O.g(k-d,m-e);this.P.g(n-f,o-g);k=yb(this.O);m=yb(this.P);k>0.15?this.O.scale(1/k):this.O.qa();m>0.15?this.P.scale(1/m):this.P.qa();k=this.Nc-k-this.$*m;s=P(s,Math.abs(k));
k=Q(k,-6,6);o=-this.ud*k;k=-o*this.O.x;m=-o*this.O.y;n=-this.$*o*this.P.x;o=-this.$*o*this.P.y;a.c.x+=a.i*k;a.c.y+=a.i*m;a.n+=a.m*(h*m-i*k);c.c.x+=c.i*n;c.c.y+=c.i*o;c.n+=c.m*(j*o-b*n);a.d.g(a.n);c.d.g(c.n);if(this.Yd==2){b=a.d;h=b.a.x*this.j.x+b.b.x*this.j.y;i=b.a.y*this.j.x+b.b.y*this.j.y;k=a.c.x+h;m=a.c.y+i;this.O.g(k-d,m-e);k=yb(this.O);if(k>0.15){this.O.x*=1/k;this.O.y*=1/k}else this.O.qa();k=this.Le-k;s=P(s,-k);k=Q(k+0.15,-6,0);o=-this.Qc*k;d=this.sd;this.sd=P(0,this.sd+o);o=this.sd-d;k=-o*
this.O.x;m=-o*this.O.y;a.c.x+=a.i*k;a.c.y+=a.i*m;a.n+=a.m*(h*m-i*k);a.d.g(a.n)}if(this.Zd==2){b=c.d;j=b.a.x*this.k.x+b.b.x*this.k.y;b=b.a.y*this.k.x+b.b.y*this.k.y;n=c.c.x+j;o=c.c.y+b;this.P.g(n-f,o-g);m=yb(this.P);if(m>0.15){this.P.x*=1/m;this.P.y*=1/m}else this.P.qa();k=this.Me-m;s=P(s,-k);k=Q(k+0.15,-6,0);o=-this.Rc*k;d=this.td;this.td=P(0,this.td+o);o=this.td-d;n=-o*this.P.x;o=-o*this.P.y;c.c.x+=c.i*n;c.c.y+=c.i*o;c.n+=c.m*(j*o-b*n);c.d.g(c.n)}return s<0.15};var jd=30;function kd(a){this.o=new X;this.q=new X;this.na=a.type;this.p=this.F=p;this.h=a.W;this.e=a.Y;this.sb=a.ab;this.kb=q;this.Ya=a.C;this.ub=new N;this.vb=new N;this.j=new N;this.k=new N;this.U=new dd;this.vc=this.ac=this.uc=this.$b=p;var c,b;this.Cf=a.dd.h;this.h=a.dd.e;if(a.dd.na==1){this.$b=a.dd;R(this.ub,this.$b.j);R(this.j,this.$b.k);c=bd(this.$b)}else{this.uc=a.dd;R(this.ub,this.uc.j);R(this.j,this.uc.k);c=fd(this.uc)}this.Df=a.ed.h;this.e=a.ed.e;if(a.ed.na==1){this.ac=a.ed;R(this.vb,this.ac.j);
R(this.k,this.ac.k);b=bd(this.ac)}else{this.vc=a.ed;R(this.vb,this.vc.j);R(this.k,this.vc.k);b=fd(this.vc)}this.$=a.Jf;this.Nc=c+this.$*b;this.V=0}G(kd.prototype,$c.prototype);t=kd.prototype;t.Jb=function(){var a=this.h.d;return new N(this.h.c.x+(a.a.x*this.j.x+a.b.x*this.j.y),this.h.c.y+(a.a.y*this.j.x+a.b.y*this.j.y))};t.Kb=function(){var a=this.e.d;return new N(this.e.c.x+(a.a.x*this.k.x+a.b.x*this.k.y),this.e.c.y+(a.a.y*this.k.x+a.b.y*this.k.y))};
t.Lb=function(){var a=this.Cf,c=this.Df,b=this.h,d=this.e,e,f,g,h=0;this.U.qa();if(this.$b){this.U.ca=-1;h+=b.m}else{g=a.d;e=this.uc.xa;a=g.a.x*e.x+g.b.x*e.y;e=g.a.y*e.x+g.b.y*e.y;g=b.d;f=g.a.x*this.j.x+g.b.x*this.j.y;g=g.a.y*this.j.x+g.b.y*this.j.y;f=f*e-g*a;this.U.K.g(-a,-e);this.U.ca=-f;h+=b.i+b.m*f*f}if(this.ac){this.U.da=-this.$;h+=this.$*this.$*d.m}else{g=c.d;e=this.vc.xa;a=g.a.x*e.x+g.b.x*e.y;e=g.a.y*e.x+g.b.y*e.y;g=d.d;f=g.a.x*this.k.x+g.b.x*this.k.y;g=g.a.y*this.k.x+g.b.y*this.k.y;f=f*e-
g*a;this.U.L.g(-this.$*a,-this.$*e);this.U.da=-this.$*f;h+=this.$*this.$*(d.i+d.m*f*f)}this.Ma=1/h;b.f.x+=b.i*this.V*this.U.K.x;b.f.y+=b.i*this.V*this.U.K.y;b.l+=b.m*this.V*this.U.ca;d.f.x+=d.i*this.V*this.U.L.x;d.f.y+=d.i*this.V*this.U.L.y;d.l+=d.m*this.V*this.U.da};t.ob=function(){var a=this.h,c=this.e,b=-this.Ma*this.U.Yc(a.f,a.l,c.f,c.l);this.V+=b;a.f.x+=a.i*b*this.U.K.x;a.f.y+=a.i*b*this.U.K.y;a.l+=a.m*b*this.U.ca;c.f.x+=c.i*b*this.U.L.x;c.f.y+=c.i*b*this.U.L.y;c.l+=c.m*b*this.U.da};
t.nb=function(){var a=this.h,c=this.e,b=-this.Ma*(this.Nc-((this.$b?bd(this.$b):fd(this.uc))+this.$*(this.ac?bd(this.ac):fd(this.vc))));a.c.x+=a.i*b*this.U.K.x;a.c.y+=a.i*b*this.U.K.y;a.n+=a.m*b*this.U.ca;c.c.x+=c.i*b*this.U.L.x;c.c.y+=c.i*b*this.U.L.y;c.n+=c.m*b*this.U.da;a.d.g(a.n);c.d.g(c.n);return l};function ld(a,c,b){this.vd=new Gb;this.nc=new kc(this);this.Je=p;this.Nf=pc;this.Z=this.aa=this.rb=p;this.lb=this.Ub=this.La=0;this.nd=p;this.xf=b;this.Bf=c;this.nc.Q=this;this.Qa=new Cc(a,this.nc);this.pc=Y(this,new md);this.uf=[];this.Xc=q}function Y(a,c){var b=new Qc(c,a);b.F=p;if(b.p=a.rb)a.rb.F=b;a.rb=b;++a.La;return b}
function nd(a,c){var b;b=p;switch(c.type){case 3:b=new hd(c);break;case 5:b=new gd(c);break;case 2:b=new ed(c);break;case 1:b=new ad(c);break;case 4:b=new id(c);break;case 6:b=new kd(c)}b=b;b.F=p;if(b.p=a.Z)a.Z.F=b;a.Z=b;++a.lb;b.o.Rb=b;b.o.sa=b.e;b.o.r=p;if(b.o.next=b.h.Z)b.h.Z.r=b.o;b.h.Z=b.o;b.q.Rb=b;b.q.sa=b.h;b.q.r=p;if(b.q.next=b.e.Z)b.e.Z.r=b.q;b.e.Z=b.q;if(c.ab==q)for(var d=(c.W.bc<c.Y.bc?c.W:c.Y).Hb;d;d=d.p)d.Zc(a.Qa);return b}
ld.prototype.Hc=function(a,c,b){var d=[];a=this.Qa.hf(a,d,b);for(b=0;b<a;++b)c[b]=d[b];return a};var Yc=1,Wc=1;function md(){this.Cc=[];this.C=p;for(var a=0;a<64;a++)this.Cc[a]=p;this.position=new N(0,0);this.rotation=0;this.wf=new N(0,0);this.sf=this.vf=this.Id=0;this.rf=l;this.If=this.tf=q}function Z(a,c){for(var b=0;b<64;++b)if(a.Cc[b]==p){a.Cc[b]=c;break}};function od(){this.type=-1;this.C=p;this.Ba=new N(0,0);this.Bb=0;this.bb=0.2;this.Aa=this.Sa=0;this.Ta=1;this.Za=65535;this.Qb=0}od.prototype.Ta=0;od.prototype.Za=0;od.prototype.Qb=0;function pd(){this.type=-1;this.C=p;this.Ba=new N(0,0);this.Bb=0;this.bb=0.2;this.Aa=this.Sa=0;this.Ta=1;this.Za=65535;this.Qb=0;this.type=1;this.T=new N(1,1)}B(pd,od);function qd(){this.type=-1;this.C=p;this.Ba=new N(0,0);this.Bb=0;this.bb=0.2;this.Aa=this.Sa=0;this.Ta=1;this.Za=65535;this.Qb=0;this.type=cc;this.xb=1}B(qd,od);function rd(){this.Vd=0;this.cc=[];this.Jc=this.Uc=0}function sd(a){var c=ia();if(a.Xd>0){var b=c-a.Xd;b/=1E3;a.Vd++;if(a.cc.length<td){a.cc.push(b);a.Uc+=b;a.Jc=a.Vd/a.Uc}else{var d=a.Vd%a.cc.length;a.Uc-=a.cc[d];a.cc[d]=b;a.Uc+=a.cc[d];a.Jc=a.cc.length/a.Uc}}a.Xd=c;return a.Jc}rd.prototype.Xd=0;var td=100;function ud(a){var c=new pd,b=new md;Z(b,c);c.Aa=1;c.bb=0.5;c.T.g(10,10);for(c=0;c<8;c++){b.position.g(250-Math.random()*2-1,245-c*22);Y(a,b)}for(c=0;c<8;c++){b.position.g(150-Math.random()*5+c,245-c*22);Y(a,b)}for(c=0;c<8;c++){b.position.g(350+Math.random()*5-c,245-c*22);Y(a,b)}};function vd(){this.type=0;this.Y=this.W=this.C=p;this.ab=q}vd.prototype={type:0,C:p,W:p,Y:p,ab:p};function wd(){this.type=0;this.Y=this.W=this.C=p;this.ab=q;this.type=1;this.ka=new N(0,0);this.dc=this.he=this.Ze=this.De=0;this.Ab=this.Ic=q}G(wd.prototype,vd.prototype);G(wd.prototype,{ka:p,De:p,Ze:p,he:p,dc:p,Ic:p,Ab:p});function xd(a){var c,b=a.pc,d=new wd;for(c=0;c<4;c++){d.ka.g(250+40*c,50);d.W=b;d.Y=yd(a,250+40*c,200);nd(a,d)}d.ka.g(210,50);d.W=b;d.Y=yd(a,60,50);nd(a,d)};function zd(){this.type=-1;this.C=p;this.Ba=new N(0,0);this.Bb=0;this.bb=0.2;this.Aa=this.Sa=0;this.Ta=1;this.Za=65535;this.Qb=0;this.Ib=Array(8);this.type=bc;for(var a=this.Dc=0;a<8;a++)this.Ib[a]=new N}B(zd,od);function Ad(a){var c=new qd;c.xb=50;c.Sa=0.2;var b=new md;Z(b,c);b.position.g(350,100);Y(a,b);Bd(a,100,100,[[0,0],[10,30],[-10,30]],l);Bd(a,150,150,[[0,0],[10,30],[-10,30]],l);b=Cd(a,150,100,20,20,q);c=new wd;c.W=b;c.Y=a.pc;c.ka=b.c;nd(a,c);b=Bd(a,300,200,[[0,0],[100,30],[-100,30]]);c.W=b;c.ka=b.c;nd(a,c)}function Bd(a,c,b,d,e){var f=new zd;if(!e)f.Aa=1;f.Dc=d.length;for(e=0;e<d.length;e++)f.Ib[e].g(d[e][0],d[e][1]);d=new md;Z(d,f);d.position.g(c,b);return Y(a,d)};function Dd(){this.type=0;this.Y=this.W=this.C=p;this.ab=q;this.type=2;this.ka=new N(0,0);this.axis=new N(0,0);this.dc=this.ge=this.$e=this.Ee=0;this.Ab=this.Ic=q}G(Dd.prototype,vd.prototype);G(Dd.prototype,{ka:p,axis:p,Ee:p,$e:p,ge:p,dc:p,Ic:p,Ab:p});function Ed(a){var c=a.pc,b=new pd;b.T.g(5,25);b.Aa=1;var d=new md;Z(d,b);var e=new wd,f=c;d.position.g(250,210);var g=Y(a,d);e.ka.g(250,235);e.W=f;e.Y=g;e.dc=-1*Math.PI;e.he=5E8;e.Ab=l;nd(a,e);f=g;b.T.g(5,45);d.position.g(250,140);g=Y(a,d);e.ka.g(250,185);e.W=f;e.Y=g;e.Ab=q;nd(a,e);f=g;b.T.g(20,20);d.position.g(250,95);g=Y(a,d);e.ka.g(250,95);e.W=f;e.Y=g;nd(a,e);e=new Dd;e.ka.g(250,95);e.W=c;e.Y=g;e.axis.g(0,1);e.dc=0;e.ge=1E5;e.Ab=l;nd(a,e);b.Aa=2;d.position.g(250,10);Y(a,d)};function Fd(a){var c;for(c=1;c<=4;c++){var b=a,d=150+3*Math.random(),e=40*c,f=[[-30,0],[30,0],[0,15]],g=new zd;g.Dc=f.length;var h=void 0;for(h=0;h<f.length;h++)g.Ib[h].g(f[h][0],f[h][1]);g.Bb=0.3524*Math.PI;var i=new U(g.Bb);g.Ba=L(i,new N(30,0));g.Aa=1;i=new zd;i.Dc=f.length;for(h=0;h<f.length;h++)i.Ib[h].g(f[h][0],f[h][1]);i.Bb=-0.3524*Math.PI;f=new U(i.Bb);i.Ba=L(f,new N(-30,0));f=new md;Z(f,g);Z(f,i);f.position.g(d,e);Y(b,f)}for(c=1;c<=4;c++){b=a;d=350+3*Math.random();e=45*c;g=new qd;g.Aa=1;
g.xb=20;g.Sa=0.2;g.Ba.g(-20,0);i=new qd;i.Aa=1;i.xb=20;i.Sa=0.2;i.Ba.g(20,0);f=new md;Z(f,g);Z(f,i);f.position.g(d,e);Y(b,f)}};function Gd(a){this.rc=0;this.jb=[];this.jb.push(Fd);this.jb.push(Ed);this.jb.push(ud);this.jb.push(xd);this.jb.push(Ad);this.He=a.width;this.Ge=a.height;this.Vc=new xb(this.He/2-250,this.Ge/2-185);this.od=a.getContext("2d");this.od.fillStyle="#ffffff";this.od.translate(this.Vc.x,this.Vc.y);ob(a,"click",function(c){c=new xb(c.offsetX,c.offsetY);zb(c,this.Vc);Math.random()<0.5?yd(this.Q,c.x,c.y,10):Cd(this.Q,c.x,c.y,10,10,q)},q,this);this.Af=new rd;this.Sf=0;this.rc=Math.floor(Math.random()*this.jb.length);
Hd(this);this.ve()}B(Gd,Ab);function Id(a,c){if(a.jb.length==0)throw"No demos to load";for(a.rc+=c;a.rc<0;)a.rc+=a.jb.length;a.rc%=a.jb.length;Hd(a)}function Hd(a){var c=new Fb;c.G.g(-1E3,-1E3);c.B.g(1E3,1E3);c=new ld(c,new N(0,300),l);Cd(c,250,305,250,5,l,l);Cd(c,5,185,5,125,l,l);Cd(c,495,185,5,125,l,l);a.Q=c;a.jb[a.rc](a.Q)}
Gd.prototype.ve=function(){w.setTimeout(ha(this.ve,this));var a=this.Q,c=Jd,b,d;a.vd.Pa=c;a.vd.Qd=1;a.vd.Pd=c>0?1/c:0;a.Pe=0;for(var e=a.nc,f=e.Q.aa;f!=p;){var g=f;f=f.p;g.z&2&&nc(e,g)}a.nc.Wd=l;for(e=a.nd;e;){f=e;e=e.p;for(g=f.Z;g;){var h=g;g=g.next;b=a;h=h.Rb;d=h.sb;if(h.F)h.F.p=h.p;if(h.p)h.p.F=h.F;if(h==b.Z)b.Z=h.p;var i=h.h,j=h.e;oc(i);oc(j);if(h.o.r)h.o.r.next=h.o.next;if(h.o.next)h.o.next.r=h.o.r;if(h.o==i.Z)i.Z=h.o.next;h.o.r=p;h.o.next=p;if(h.q.r)h.q.r.next=h.q.next;if(h.q.next)h.q.next.r=
h.q.r;if(h.q==j.Z)j.Z=h.q.next;h.q.r=p;h.q.next=p;--b.lb;if(d==q)for(h=(i.bc<j.bc?i:j).Hb;h;h=h.p)h.Zc(b.Qa)}for(f=f.Hb;f;){g=f;f=f.p;g.ba!=65535&&g.w.Q.Qa.gc(g.ba)}}a.nd=p;a.nc.Wd=q;for(e=a.nc.Q.aa;e!=p;e=e.p)if(!((e.I.w.z&V)==V&&(e.J.w.z&V)==V)){f=e.Da;e.Fc();g=e.Da;if(f==0&&g>0){f=e.I.w;g=e.J.w;b=e.o;h=e.q;b.Ga=e;b.sa=g;b.r=p;b.next=f.aa;if(b.next!=p)b.next.r=e.o;f.aa=e.o;h.Ga=e;h.sa=f;h.r=p;h.next=g.aa;if(h.next!=p)h.next.r=h;g.aa=h}else if(f>0&&g==0){f=e.I.w;g=e.J.w;b=e.o;h=e.q;if(b.r)b.r.next=
b.next;if(b.next)b.next.r=b.r;if(b==f.aa)f.aa=b.next;b.r=p;b.next=p;if(h.r)h.r.next=h.next;if(h.next)h.next.r=h.r;if(h==g.aa)g.aa=h.next;h.r=p;h.next=p}}e=new Xc(a.La,a.Ub,a.lb,a.Uf);for(b=a.rb;b!=p;b=b.p)b.z&=-5;for(f=a.aa;f!=p;f=f.p)f.z&=-2;for(f=a.Z;f!=p;f=f.p)f.kb=q;f=Array(a.La);for(g=0;g<a.La;g++)f[g]=p;for(g=a.rb;g!=p;g=g.p)if(!(g.z&(lc|4|V|Sc))){b=e;b.La=0;b.Ub=0;h=b.lb=0;f[h++]=g;for(g.z|=4;h>0;){d=b=f[--h];e.qb[e.La++]=d;b.z&=~V;if(!(b.z&lc)){for(i=b.aa;i!=p;i=i.next)if(!(i.Ga.z&1)){d=i.Ga;
e.Ud[e.Ub++]=d;i.Ga.z|=1;d=i.sa;if(!(d.z&4)){f[h++]=d;d.z|=4}}for(b=b.Z;b!=p;b=b.next)if(b.Rb.kb!=l){d=b.Rb;e.Pc[e.lb++]=d;b.Rb.kb=l;d=b.sa;if(!(d.z&4)){f[h++]=d;d.z|=4}}}}e.Gd(a.vd,a.Bf);a.Pe=P(a.Pe,Zc);if(a.xf){b=a;h=e;d=c;i=0;j=void 0;var k=Number.MAX_VALUE,m=Ob*Ob;for(i=0;i<h.La;++i){j=h.qb[i];if(j.i!=0){if((j.z&Rc)==0)k=j.xc=0;if((j.z&Rc)==0||j.l*j.l>m||Bb(j.f,j.f)>0.09)k=j.xc=0;else{j.xc+=d;k=k<j.xc?k:j.xc}}}if(k>=0.5){for(i=0;i<h.La;++i){j=h.qb[i];j.z|=V}h=l}else h=q;b.Xc=h}for(h=0;h<e.La;++h){b=
e.qb[h];if(b.z&lc)b.z&=-5;if((b.z&Sc)==Sc&&a.Je)if(a.Je.Mf(b)==1){d=a;b=b;if(!(b.z&32)){if(b.F)b.F.p=b.p;if(b.p)b.p.F=b.F;if(b==d.rb)d.rb=b.p;b.z|=32;--d.La;b.F=p;b.p=d.nd;d.nd=b}e.qb[h]=p}}}a.uf=a.Qa.Ec();if(!this.Q.Xc){this.od.clearRect(-this.Vc.x,-this.Vc.y,this.He,this.Ge);c=this.Q;a=this.od;for(e=c.Z;e;e=e.p){f=c;g=e;b=a;h=g.h;d=g.e;i=h.c;j=d.c;k=g.Jb();m=g.Kb();b.strokeStyle="#00eeee";b.beginPath();switch(g.na){case 3:b.moveTo(k.x,k.y);b.lineTo(m.x,m.y);break;case 4:break;default:if(h==f.pc){b.moveTo(k.x,
k.y);b.lineTo(j.x,j.y)}else if(d==f.pc){b.moveTo(k.x,k.y);b.lineTo(i.x,i.y)}else{b.moveTo(i.x,i.y);b.lineTo(k.x,k.y);b.lineTo(j.x,j.y);b.lineTo(m.x,m.y)}}b.stroke()}for(c=c.rb;c;c=c.p)for(e=c.Hb;e!=p;e=e.ic()){f=e;g=a;g.strokeStyle="#ffffff";g.beginPath();switch(f.na){case cc:b=f.c;h=f.ja;g.arc(f.c.x,f.c.y,f.ja,0,2*Math.PI,q);g.moveTo(b.x,b.y);d=f.d.a;b=new N(b.x+h*d.x,b.y+h*d.y);g.lineTo(b.x,b.y);break;case bc:b=Cb(f.c,L(f.d,f.u[0]));g.moveTo(b.x,b.y);for(h=0;h<f.Oa;h++){d=Cb(f.c,L(f.d,f.u[h]));
g.lineTo(d.x,d.y)}g.lineTo(b.x,b.y)}g.stroke();f.Ya=="filled"&&g.fill()}}a=Math.round(sd(this.Af));this.dispatchEvent(new Kd(a,this.Q.Xc))};function yd(a,c,b,d){d=d||20;var e=new qd;e.Aa=1;e.xb=d;e.Sa=0.8;e.bb=0.9;d=new md;Z(d,e);d.position.g(c,b);return Y(a,d)}function Cd(a,c,b,d,e,f,g){if(typeof f=="undefined")f=l;if(typeof g=="undefined")g=q;var h=new pd;if(!f)h.Aa=1;if(g)h.C="filled";h.T.g(d,e);d=new md;Z(d,h);d.position.g(c,b);return Y(a,d)}var Jd=1/60;
function Kd(a,c){D.call(this,Ld);this.Jc=a;this.Xc=c}B(Kd,D);var Ld="Demo.FrameEventType";$(window).load(function(){var a=new Gd($("canvas")[0]);$("#previous").click(function(){Id(a,-1)});$("#reload").click(function(){Id(a,0)});$("#next").click(function(){Id(a,1)});var c=0;ob(a,Ld,function(b){if(c==0){$("#fps").html(b.Jc+" fps");b.Xc?$("#fps").addClass("sleeping"):$("#fps").removeClass("sleeping")}c++;c%=30});$("canvas").each(function(){this.onselectstart=ba(q);this.unselectable="on";$(this).css("-moz-user-select","none");$(this).css("-webkit-user-select","none")})});
